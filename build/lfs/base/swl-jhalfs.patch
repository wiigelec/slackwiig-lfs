diff -Nuar org/blfs_root/scripts/001-z-libxml2 diff/blfs_root/scripts/001-z-libxml2
--- org/blfs_root/scripts/001-z-libxml2	2024-03-03 14:58:12.988338991 +0000
+++ diff/blfs_root/scripts/001-z-libxml2	2024-03-03 15:34:17.179986003 +0000
@@ -92,6 +92,8 @@
 #      '^Total|expected' check.log || true
 #check || true
 #check-valgrind || true
+export INSTALLWATCHFILE=/var/lib/iwlog/libxml2-2.10.4.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 install
 
 for libdir in /lib /usr/lib $(find /opt -name lib); do
@@ -104,4 +106,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/001-z-libxml2.org diff/blfs_root/scripts/001-z-libxml2.org
--- org/blfs_root/scripts/001-z-libxml2.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/001-z-libxml2.org	2024-03-03 15:03:54.223377853 +0000
@@ -0,0 +1,107 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=libxml2
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=libxml2-2.10.4.tar.xz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://download.gnome.org/sources/libxml2/2.10/libxml2-2.10.4.tar.xz"
+  fi
+fi
+echo "76808c467a58c31e2dbd511e71d5fd13  $PACKAGE" | md5sum -c -
+
+PACKAGE1=xmlts20130923.tar.gz
+if [[ ! -f $PACKAGE1 ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE1" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE1" "$PACKAGE1"
+  else
+    wget -T 30 -t 5 "https://www.w3.org/XML/Test/xmlts20130923.tar.gz"
+  fi
+fi
+[ "$SRC_DIR" != "$BUILD_DIR" ] && ln -sf "$SRC_DIR/$PACKAGE1" "$BUILD_DIR"
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+./configure --prefix=/usr           \
+            --sysconfdir=/etc       \
+            --disable-static        \
+            --with-history          \
+            PYTHON=/usr/bin/python3 \
+            --docdir=/usr/share/doc/libxml2-2.10.4
+make
+tar xf ../xmlts20130923.tar.gz
+#make -k check > check.log || true
+#grep -E || true
+#      '^Total|expected' check.log || true
+#check || true
+#check-valgrind || true
+make -j1 install
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/002-z-libxslt diff/blfs_root/scripts/002-z-libxslt
--- org/blfs_root/scripts/002-z-libxslt	2024-03-03 14:58:12.991338998 +0000
+++ diff/blfs_root/scripts/002-z-libxslt	2024-03-03 15:34:17.258986276 +0000
@@ -75,6 +75,8 @@
             PYTHON=/usr/bin/python3
 make
 #make -k check || true
+export INSTALLWATCHFILE=/var/lib/iwlog/libxslt-1.1.38.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 install
 
 for libdir in /lib /usr/lib $(find /opt -name lib); do
@@ -87,4 +89,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/002-z-libxslt.org diff/blfs_root/scripts/002-z-libxslt.org
--- org/blfs_root/scripts/002-z-libxslt.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/002-z-libxslt.org	2024-03-03 15:03:54.223377853 +0000
@@ -0,0 +1,90 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=libxslt
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=libxslt-1.1.38.tar.xz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://download.gnome.org/sources/libxslt/1.1/libxslt-1.1.38.tar.xz"
+  fi
+fi
+echo "7d6e43db810177ddf9818ef394027019  $PACKAGE" | md5sum -c -
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+./configure --prefix=/usr                          \
+            --disable-static                       \
+            --docdir=/usr/share/doc/libxslt-1.1.38 \
+            PYTHON=/usr/bin/python3
+make
+#make -k check || true
+make -j1 install
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/003-z-sgml-common diff/blfs_root/scripts/003-z-sgml-common
--- org/blfs_root/scripts/003-z-sgml-common	2024-03-03 14:58:12.993339003 +0000
+++ diff/blfs_root/scripts/003-z-sgml-common	2024-03-03 15:34:17.331986528 +0000
@@ -83,6 +83,8 @@
 autoreconf -f -i
 ./configure --prefix=/usr --sysconfdir=/etc
 make
+export INSTALLWATCHFILE=/var/lib/iwlog/sgml-common-0.6.3.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 docdir=/usr/share/doc install
 
 install-catalog --add /etc/sgml/sgml-ent.cat \
@@ -102,4 +104,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/003-z-sgml-common.org diff/blfs_root/scripts/003-z-sgml-common.org
--- org/blfs_root/scripts/003-z-sgml-common.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/003-z-sgml-common.org	2024-03-03 15:03:54.224377857 +0000
@@ -0,0 +1,105 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=sgml-common
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=sgml-common-0.6.3.tgz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://sourceware.org/ftp/docbook-tools/new-trials/SOURCES/sgml-common-0.6.3.tgz"
+  fi
+fi
+echo "103c9828f24820df86e55e7862e28974  $PACKAGE" | md5sum -c -
+
+PATCH=sgml-common-0.6.3-manpage-1.patch
+if [[ ! -f $PATCH ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PATCH" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PATCH" "$PATCH"
+  else
+    wget -T 30 -t 5 "https://www.linuxfromscratch.org/patches/blfs/12.0/sgml-common-0.6.3-manpage-1.patch"
+  fi
+fi
+[ "$SRC_DIR" != "$BUILD_DIR" ] && ln -sf "$SRC_DIR/$PATCH" "$BUILD_DIR"
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+patch -Np1 -i ../sgml-common-0.6.3-manpage-1.patch
+autoreconf -f -i
+./configure --prefix=/usr --sysconfdir=/etc
+make
+make -j1 docdir=/usr/share/doc install
+
+install-catalog --add /etc/sgml/sgml-ent.cat \
+    /usr/share/sgml/sgml-iso-entities-8879.1986/catalog
+
+install-catalog --add /etc/sgml/sgml-docbook.cat \
+    /etc/sgml/sgml-ent.cat
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/004-z-unzip diff/blfs_root/scripts/004-z-unzip
--- org/blfs_root/scripts/004-z-unzip	2024-03-03 14:58:12.994339006 +0000
+++ diff/blfs_root/scripts/004-z-unzip	2024-03-03 15:34:17.443986915 +0000
@@ -77,6 +77,8 @@
      ;;
 esac
 export JH_UNPACKDIR
+export INSTALLWATCHFILE=/var/lib/iwlog/unzip60.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 cd $JH_UNPACKDIR
 
 patch -Np1 -i ../unzip-6.0-consolidated_fixes-1.patch
@@ -94,4 +96,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/004-z-unzip.org diff/blfs_root/scripts/004-z-unzip.org
--- org/blfs_root/scripts/004-z-unzip.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/004-z-unzip.org	2024-03-03 15:03:54.224377857 +0000
@@ -0,0 +1,97 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=unzip
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=unzip60.tar.gz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://downloads.sourceforge.net/infozip/unzip60.tar.gz"
+  fi
+fi
+echo "62b490407489521db863b523a7f86375  $PACKAGE" | md5sum -c -
+
+PATCH=unzip-6.0-consolidated_fixes-1.patch
+if [[ ! -f $PATCH ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PATCH" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PATCH" "$PATCH"
+  else
+    wget -T 30 -t 5 "https://www.linuxfromscratch.org/patches/blfs/12.0/unzip-6.0-consolidated_fixes-1.patch"
+  fi
+fi
+[ "$SRC_DIR" != "$BUILD_DIR" ] && ln -sf "$SRC_DIR/$PATCH" "$BUILD_DIR"
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+patch -Np1 -i ../unzip-6.0-consolidated_fixes-1.patch
+make -f unix/Makefile generic
+make -j1 prefix=/usr MANDIR=/usr/share/man/man1 \
+ -f unix/Makefile install
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/005-z-DocBook diff/blfs_root/scripts/005-z-DocBook
--- org/blfs_root/scripts/005-z-DocBook	2024-03-03 14:58:12.997339013 +0000
+++ diff/blfs_root/scripts/005-z-DocBook	2024-03-03 15:34:17.575987372 +0000
@@ -67,6 +67,8 @@
      ;;
 esac
 export JH_UNPACKDIR
+export INSTALLWATCHFILE=/var/lib/iwlog/docbook-xml-4.5.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 cd $JH_UNPACKDIR
 
 install -v -d -m755 /usr/share/xml/docbook/xml-dtd-4.5
@@ -174,4 +176,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/005-z-DocBook.org diff/blfs_root/scripts/005-z-DocBook.org
--- org/blfs_root/scripts/005-z-DocBook.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/005-z-DocBook.org	2024-03-03 15:03:54.225377861 +0000
@@ -0,0 +1,177 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=DocBook
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=docbook-xml-4.5.zip
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://www.docbook.org/xml/4.5/docbook-xml-4.5.zip"
+  fi
+fi
+echo "03083e288e87a7e829e437358da7ef9e  $PACKAGE" | md5sum -c -
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+install -v -d -m755 /usr/share/xml/docbook/xml-dtd-4.5
+install -v -d -m755 /etc/xml
+cp -v -af --no-preserve=ownership docbook.cat *.dtd ent/ *.mod \
+    /usr/share/xml/docbook/xml-dtd-4.5
+if [ ! -e /etc/xml/docbook ]; then
+    xmlcatalog --noout --create /etc/xml/docbook
+fi
+xmlcatalog --noout --add "public" \
+    "-//OASIS//DTD DocBook XML V4.5//EN" \
+    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "public" \
+    "-//OASIS//DTD DocBook XML CALS Table Model V4.5//EN" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5/calstblx.dtd" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "public" \
+    "-//OASIS//DTD XML Exchange Table Model 19990315//EN" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5/soextblx.dtd" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "public" \
+    "-//OASIS//ELEMENTS DocBook XML Information Pool V4.5//EN" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5/dbpoolx.mod" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "public" \
+    "-//OASIS//ELEMENTS DocBook XML Document Hierarchy V4.5//EN" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5/dbhierx.mod" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "public" \
+    "-//OASIS//ELEMENTS DocBook XML HTML Tables V4.5//EN" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5/htmltblx.mod" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "public" \
+    "-//OASIS//ENTITIES DocBook XML Notations V4.5//EN" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5/dbnotnx.mod" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "public" \
+    "-//OASIS//ENTITIES DocBook XML Character Entities V4.5//EN" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5/dbcentx.mod" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "public" \
+    "-//OASIS//ENTITIES DocBook XML Additional General Entities V4.5//EN" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5/dbgenent.mod" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "rewriteSystem" \
+    "http://www.oasis-open.org/docbook/xml/4.5" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5" \
+    /etc/xml/docbook
+xmlcatalog --noout --add "rewriteURI" \
+    "http://www.oasis-open.org/docbook/xml/4.5" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5" \
+    /etc/xml/docbook
+if [ ! -e /etc/xml/catalog ]; then
+    xmlcatalog --noout --create /etc/xml/catalog
+fi
+xmlcatalog --noout --add "delegatePublic" \
+    "-//OASIS//ENTITIES DocBook XML" \
+    "file:///etc/xml/docbook" \
+    /etc/xml/catalog
+xmlcatalog --noout --add "delegatePublic" \
+    "-//OASIS//DTD DocBook XML" \
+    "file:///etc/xml/docbook" \
+    /etc/xml/catalog
+xmlcatalog --noout --add "delegateSystem" \
+    "http://www.oasis-open.org/docbook/" \
+    "file:///etc/xml/docbook" \
+    /etc/xml/catalog
+xmlcatalog --noout --add "delegateURI" \
+    "http://www.oasis-open.org/docbook/" \
+    "file:///etc/xml/docbook" \
+    /etc/xml/catalog
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+for DTDVERSION in 4.1.2 4.2 4.3 4.4
+do
+  xmlcatalog --noout --add "public" \
+    "-//OASIS//DTD DocBook XML V$DTDVERSION//EN" \
+    "http://www.oasis-open.org/docbook/xml/$DTDVERSION/docbookx.dtd" \
+    /etc/xml/docbook
+  xmlcatalog --noout --add "rewriteSystem" \
+    "http://www.oasis-open.org/docbook/xml/$DTDVERSION" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5" \
+    /etc/xml/docbook
+  xmlcatalog --noout --add "rewriteURI" \
+    "http://www.oasis-open.org/docbook/xml/$DTDVERSION" \
+    "file:///usr/share/xml/docbook/xml-dtd-4.5" \
+    /etc/xml/docbook
+  xmlcatalog --noout --add "delegateSystem" \
+    "http://www.oasis-open.org/docbook/xml/$DTDVERSION/" \
+    "file:///etc/xml/docbook" \
+    /etc/xml/catalog
+  xmlcatalog --noout --add "delegateURI" \
+    "http://www.oasis-open.org/docbook/xml/$DTDVERSION/" \
+    "file:///etc/xml/docbook" \
+    /etc/xml/catalog
+done
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/006-z-docbook-xsl diff/blfs_root/scripts/006-z-docbook-xsl
--- org/blfs_root/scripts/006-z-docbook-xsl	2024-03-03 14:58:13.800340894 +0000
+++ diff/blfs_root/scripts/006-z-docbook-xsl	2024-03-03 15:34:17.696987790 +0000
@@ -88,6 +88,8 @@
      ;;
 esac
 export JH_UNPACKDIR
+export INSTALLWATCHFILE=/var/lib/iwlog/docbook-xsl-nons-1.79.2.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 cd $JH_UNPACKDIR
 
 patch -Np1 -i ../docbook-xsl-nons-1.79.2-stack_fix-1.patch
@@ -138,4 +140,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/006-z-docbook-xsl.org diff/blfs_root/scripts/006-z-docbook-xsl.org
--- org/blfs_root/scripts/006-z-docbook-xsl.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/006-z-docbook-xsl.org	2024-03-03 15:03:55.008380686 +0000
@@ -0,0 +1,141 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=docbook-xsl
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=docbook-xsl-nons-1.79.2.tar.bz2
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://github.com/docbook/xslt10-stylesheets/releases/download/release/1.79.2/docbook-xsl-nons-1.79.2.tar.bz2"
+  fi
+fi
+echo "2666d1488d6ced1551d15f31d7ed8c38  $PACKAGE" | md5sum -c -
+
+PATCH=docbook-xsl-nons-1.79.2-stack_fix-1.patch
+if [[ ! -f $PATCH ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PATCH" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PATCH" "$PATCH"
+  else
+    wget -T 30 -t 5 "https://www.linuxfromscratch.org/patches/blfs/12.0/docbook-xsl-nons-1.79.2-stack_fix-1.patch"
+  fi
+fi
+[ "$SRC_DIR" != "$BUILD_DIR" ] && ln -sf "$SRC_DIR/$PATCH" "$BUILD_DIR"
+
+PACKAGE1=docbook-xsl-doc-1.79.2.tar.bz2
+if [[ ! -f $PACKAGE1 ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE1" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE1" "$PACKAGE1"
+  else
+    wget -T 30 -t 5 "https://github.com/docbook/xslt10-stylesheets/releases/download/release/1.79.2/docbook-xsl-doc-1.79.2.tar.bz2"
+  fi
+fi
+echo "62375ca864fc198cb2b17d98209d0b8c  $PACKAGE1" | md5sum -c -
+[ "$SRC_DIR" != "$BUILD_DIR" ] && ln -sf "$SRC_DIR/$PACKAGE1" "$BUILD_DIR"
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+patch -Np1 -i ../docbook-xsl-nons-1.79.2-stack_fix-1.patch
+tar -xf ../docbook-xsl-doc-1.79.2.tar.bz2 --strip-components=1
+install -v -m755 -d /usr/share/xml/docbook/xsl-stylesheets-nons-1.79.2
+
+cp -v -R VERSION assembly common eclipse epub epub3 extensions fo        \
+         highlighting html htmlhelp images javahelp lib manpages params  \
+         profiling roundtrip slides template tests tools webhelp website \
+         xhtml xhtml-1_1 xhtml5                                          \
+    /usr/share/xml/docbook/xsl-stylesheets-nons-1.79.2
+
+ln -s VERSION /usr/share/xml/docbook/xsl-stylesheets-nons-1.79.2/VERSION.xsl
+
+install -v -m644 -D README \
+                    /usr/share/doc/docbook-xsl-nons-1.79.2/README.txt
+install -v -m644    RELEASE-NOTES* NEWS* \
+                    /usr/share/doc/docbook-xsl-nons-1.79.2
+cp -v -R doc/* /usr/share/doc/docbook-xsl-nons-1.79.2
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+if [ ! -d /etc/xml ]; then install -v -m755 -d /etc/xml; fi &&
+if [ ! -f /etc/xml/catalog ]; then
+    xmlcatalog --noout --create /etc/xml/catalog
+fi
+
+xmlcatalog --noout --add "rewriteSystem" \
+           "https://cdn.docbook.org/release/xsl-nons/1.79.2" \
+           "/usr/share/xml/docbook/xsl-stylesheets-nons-1.79.2" \
+    /etc/xml/catalog
+
+xmlcatalog --noout --add "rewriteSystem" \
+           "https://cdn.docbook.org/release/xsl-nons/current" \
+           "/usr/share/xml/docbook/xsl-stylesheets-nons-1.79.2" \
+    /etc/xml/catalog
+
+xmlcatalog --noout --add "rewriteSystem" \
+           "http://docbook.sourceforge.net/release/xsl/current" \
+           "/usr/share/xml/docbook/xsl-stylesheets-nons-1.79.2" \
+    /etc/xml/catalog
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/007-z-wget diff/blfs_root/scripts/007-z-wget
--- org/blfs_root/scripts/007-z-wget	2024-03-03 14:58:13.000339019 +0000
+++ diff/blfs_root/scripts/007-z-wget	2024-03-03 15:34:17.771988049 +0000
@@ -74,6 +74,8 @@
             --with-ssl=openssl
 make
 #make -k check || true
+export INSTALLWATCHFILE=/var/lib/iwlog/wget-1.21.4.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 install
 
 for libdir in /lib /usr/lib $(find /opt -name lib); do
@@ -87,4 +89,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/007-z-wget.org diff/blfs_root/scripts/007-z-wget.org
--- org/blfs_root/scripts/007-z-wget.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/007-z-wget.org	2024-03-03 15:03:54.227377868 +0000
@@ -0,0 +1,90 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=wget
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=wget-1.21.4.tar.gz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://ftp.gnu.org/gnu/wget/wget-1.21.4.tar.gz"
+  fi
+fi
+echo "e7f7ca2f215b711f76584756ebd3c853  $PACKAGE" | md5sum -c -
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+./configure --prefix=/usr      \
+            --sysconfdir=/etc  \
+            --with-ssl=openssl
+make
+#make -k check || true
+make -j1 install
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/008-z-libtasn1 diff/blfs_root/scripts/008-z-libtasn1
--- org/blfs_root/scripts/008-z-libtasn1	2024-03-03 14:58:13.001339022 +0000
+++ diff/blfs_root/scripts/008-z-libtasn1	2024-03-03 15:34:17.850988322 +0000
@@ -72,6 +72,8 @@
 ./configure --prefix=/usr --disable-static
 make
 #make -k check || true
+export INSTALLWATCHFILE=/var/lib/iwlog/libtasn1-4.19.0.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 install
 make -j1 -C doc/reference install-data-local
 
@@ -85,4 +87,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/008-z-libtasn1.org diff/blfs_root/scripts/008-z-libtasn1.org
--- org/blfs_root/scripts/008-z-libtasn1.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/008-z-libtasn1.org	2024-03-03 15:03:54.228377871 +0000
@@ -0,0 +1,88 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=libtasn1
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=libtasn1-4.19.0.tar.gz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://ftp.gnu.org/gnu/libtasn1/libtasn1-4.19.0.tar.gz"
+  fi
+fi
+echo "f701ab57eb8e7d9c105b2cd5d809b29a  $PACKAGE" | md5sum -c -
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+./configure --prefix=/usr --disable-static
+make
+#make -k check || true
+make -j1 install
+make -j1 -C doc/reference install-data-local
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/009-z-p11-kit diff/blfs_root/scripts/009-z-p11-kit
--- org/blfs_root/scripts/009-z-p11-kit	2024-03-03 14:58:13.003339026 +0000
+++ diff/blfs_root/scripts/009-z-p11-kit	2024-03-03 15:34:17.946988654 +0000
@@ -88,6 +88,8 @@
       -Dtrust_paths=/etc/pki/anchors
 ninja
 #ninja test || true
+export INSTALLWATCHFILE=/var/lib/iwlog/p11-kit-0.25.0.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 ninja install
 ln -sfv /usr/libexec/p11-kit/trust-extract-compat \
         /usr/bin/update-ca-certificates
@@ -104,4 +106,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/009-z-p11-kit.org diff/blfs_root/scripts/009-z-p11-kit.org
--- org/blfs_root/scripts/009-z-p11-kit.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/009-z-p11-kit.org	2024-03-03 15:03:54.229377875 +0000
@@ -0,0 +1,107 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=p11-kit
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=p11-kit-0.25.0.tar.xz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://github.com/p11-glue/p11-kit/releases/download/0.25.0/p11-kit-0.25.0.tar.xz"
+  fi
+fi
+echo "9fcb1ec80b5d083dd9b34122fa7c3c23  $PACKAGE" | md5sum -c -
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+sed 's/if (gi/& \&\& gi != C_GetInterface/' \
+    -i p11-kit/modules.c
+sed '20,$ d' -i trust/trust-extract-compat
+cat >> trust/trust-extract-compat << "EOF"
+# Copy existing anchor modifications to /etc/ssl/local
+/usr/libexec/make-ca/copy-trust-modifications
+
+# Update trust stores
+/usr/sbin/make-ca -r
+EOF
+mkdir p11-build
+cd    p11-build
+
+meson setup ..            \
+      --prefix=/usr       \
+      --buildtype=release \
+      -Dtrust_paths=/etc/pki/anchors
+ninja
+#ninja test || true
+ninja install
+ln -sfv /usr/libexec/p11-kit/trust-extract-compat \
+        /usr/bin/update-ca-certificates
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+ln -sfv ./pkcs11/p11-kit-trust.so /usr/lib/libnssckbi.so
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/010-z-make-ca diff/blfs_root/scripts/010-z-make-ca
--- org/blfs_root/scripts/010-z-make-ca	2024-03-03 14:58:13.004339029 +0000
+++ diff/blfs_root/scripts/010-z-make-ca	2024-03-03 15:34:18.041988983 +0000
@@ -68,6 +68,8 @@
 export JH_UNPACKDIR
 cd $JH_UNPACKDIR
 
+export INSTALLWATCHFILE=/var/lib/iwlog/make-ca-1.12.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 install
 install -vdm755 /etc/ssl/local
 /usr/sbin/make-ca -g
@@ -83,6 +85,7 @@
 
 export _PIP_STANDALONE_CERT=/etc/pki/tls/certs/ca-bundle.crt
 mkdir -pv /etc/profile.d
+touch /etc/profile.d/pythoncerts.sh
 cat > /etc/profile.d/pythoncerts.sh << "EOF"
 # Begin /etc/profile.d/pythoncerts.sh
 
@@ -94,4 +97,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/010-z-make-ca.org diff/blfs_root/scripts/010-z-make-ca.org
--- org/blfs_root/scripts/010-z-make-ca.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/010-z-make-ca.org	2024-03-03 15:03:54.230377879 +0000
@@ -0,0 +1,97 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=make-ca
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=make-ca-1.12.tar.xz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://github.com/lfs-book/make-ca/releases/download/v1.12/make-ca-1.12.tar.xz"
+  fi
+fi
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+make -j1 install
+install -vdm755 /etc/ssl/local
+/usr/sbin/make-ca -g
+systemctl enable update-pki.timer
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+
+export _PIP_STANDALONE_CERT=/etc/pki/tls/certs/ca-bundle.crt
+mkdir -pv /etc/profile.d
+cat > /etc/profile.d/pythoncerts.sh << "EOF"
+# Begin /etc/profile.d/pythoncerts.sh
+
+export _PIP_STANDALONE_CERT=/etc/pki/tls/certs/ca-bundle.crt
+
+# End /etc/profile.d/pythoncerts.sh
+EOF
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/011-z-curl diff/blfs_root/scripts/011-z-curl
--- org/blfs_root/scripts/011-z-curl	2024-03-03 14:58:13.005339031 +0000
+++ diff/blfs_root/scripts/011-z-curl	2024-03-03 15:34:18.128989285 +0000
@@ -76,6 +76,8 @@
             --with-ca-path=/etc/ssl/certs
 make
 #make -k test || true
+export INSTALLWATCHFILE=/var/lib/iwlog/curl-8.2.1.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 install
 
 rm -rf docs/examples/.deps
@@ -97,4 +99,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/011-z-curl.org diff/blfs_root/scripts/011-z-curl.org
--- org/blfs_root/scripts/011-z-curl.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/011-z-curl.org	2024-03-03 15:03:54.231377882 +0000
@@ -0,0 +1,100 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=curl
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=curl-8.2.1.tar.xz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://curl.se/download/curl-8.2.1.tar.xz"
+  fi
+fi
+echo "556576a795bdd2c7d10de6886480065f  $PACKAGE" | md5sum -c -
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+./configure --prefix=/usr                           \
+            --disable-static                        \
+            --with-openssl                          \
+            --enable-threaded-resolver              \
+            --with-ca-path=/etc/ssl/certs
+make
+#make -k test || true
+make -j1 install
+
+rm -rf docs/examples/.deps
+
+find docs \( -name Makefile\* -o  \
+             -name \*.1       -o  \
+             -name \*.3       -o  \
+             -name CMakeLists.txt \) -delete
+
+cp -v -R docs -T /usr/share/doc/curl-8.2.1
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/012-z-git diff/blfs_root/scripts/012-z-git
--- org/blfs_root/scripts/012-z-git	2024-03-03 14:58:13.008339038 +0000
+++ diff/blfs_root/scripts/012-z-git	2024-03-03 15:34:18.216989590 +0000
@@ -96,6 +96,8 @@
 #make html
 #make man
 #make -k test || true
+export INSTALLWATCHFILE=/var/lib/iwlog/git-2.41.0.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 perllibdir=/usr/lib/perl5/5.38/site_perl install
 #make -j1 install-man
 
@@ -135,4 +137,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/012-z-git.org diff/blfs_root/scripts/012-z-git.org
--- org/blfs_root/scripts/012-z-git.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/012-z-git.org	2024-03-03 15:03:54.234377893 +0000
@@ -0,0 +1,138 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=git
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=git-2.41.0.tar.xz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://www.kernel.org/pub/software/scm/git/git-2.41.0.tar.xz"
+  fi
+fi
+echo "c1f58a12b891ad73927b8e4a3aa29c7b  $PACKAGE" | md5sum -c -
+
+PACKAGE1=git-manpages-2.41.0.tar.xz
+if [[ ! -f $PACKAGE1 ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE1" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE1" "$PACKAGE1"
+  else
+    wget -T 30 -t 5 "https://www.kernel.org/pub/software/scm/git/git-manpages-2.41.0.tar.xz"
+  fi
+fi
+[ "$SRC_DIR" != "$BUILD_DIR" ] && ln -sf "$SRC_DIR/$PACKAGE1" "$BUILD_DIR"
+
+PACKAGE1=git-htmldocs-2.41.0.tar.xz
+if [[ ! -f $PACKAGE1 ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE1" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE1" "$PACKAGE1"
+  else
+    wget -T 30 -t 5 "https://www.kernel.org/pub/software/scm/git/git-htmldocs-2.41.0.tar.xz"
+  fi
+fi
+[ "$SRC_DIR" != "$BUILD_DIR" ] && ln -sf "$SRC_DIR/$PACKAGE1" "$BUILD_DIR"
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+./configure --prefix=/usr \
+            --with-gitconfig=/etc/gitconfig \
+            --with-python=python3
+make
+#make html
+#make man
+#make -k test || true
+make -j1 perllibdir=/usr/lib/perl5/5.38/site_perl install
+#make -j1 install-man
+
+#make -j1 htmldir=/usr/share/doc/git-2.41.0 install-html
+
+tar -xf ../git-manpages-2.41.0.tar.xz \
+    -C /usr/share/man --no-same-owner --no-overwrite-dir
+mkdir -vp   /usr/share/doc/git-2.41.0
+tar   -xf   ../git-htmldocs-2.41.0.tar.xz \
+      -C    /usr/share/doc/git-2.41.0 --no-same-owner --no-overwrite-dir
+
+find        /usr/share/doc/git-2.41.0 -type d -exec chmod 755 {} \;
+find        /usr/share/doc/git-2.41.0 -type f -exec chmod 644 {} \;
+mkdir -vp /usr/share/doc/git-2.41.0/man-pages/{html,text}
+mv        /usr/share/doc/git-2.41.0/{git*.txt,man-pages/text}
+mv        /usr/share/doc/git-2.41.0/{git*.,index.,man-pages/}html
+
+mkdir -vp /usr/share/doc/git-2.41.0/technical/{html,text}
+mv        /usr/share/doc/git-2.41.0/technical/{*.txt,text}
+mv        /usr/share/doc/git-2.41.0/technical/{*.,}html
+
+mkdir -vp /usr/share/doc/git-2.41.0/howto/{html,text}
+mv        /usr/share/doc/git-2.41.0/howto/{*.txt,text}
+mv        /usr/share/doc/git-2.41.0/howto/{*.,}html
+
+sed -i '/^<a href=/s|howto/|&html/|' /usr/share/doc/git-2.41.0/howto-index.html
+sed -i '/^\* link:/s|howto/|&html/|' /usr/share/doc/git-2.41.0/howto-index.txt
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/013-z-gpm diff/blfs_root/scripts/013-z-gpm
--- org/blfs_root/scripts/013-z-gpm	2024-03-03 14:58:13.011339045 +0000
+++ diff/blfs_root/scripts/013-z-gpm	2024-03-03 15:34:18.304989895 +0000
@@ -83,6 +83,8 @@
 ./autogen.sh
 ./configure --prefix=/usr --sysconfdir=/etc
 make
+export INSTALLWATCHFILE=/var/lib/iwlog/gpm-1.20.7.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 install
 
 install-info --dir-file=/usr/share/info/dir           \
@@ -142,4 +144,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/013-z-gpm.org diff/blfs_root/scripts/013-z-gpm.org
--- org/blfs_root/scripts/013-z-gpm.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/013-z-gpm.org	2024-03-03 15:03:54.237377904 +0000
@@ -0,0 +1,145 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=gpm
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=gpm-1.20.7.tar.bz2
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://anduin.linuxfromscratch.org/BLFS/gpm/gpm-1.20.7.tar.bz2"
+  fi
+fi
+echo "bf84143905a6a903dbd4d4b911a2a2b8  $PACKAGE" | md5sum -c -
+
+PATCH=gpm-1.20.7-consolidated-1.patch
+if [[ ! -f $PATCH ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PATCH" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PATCH" "$PATCH"
+  else
+    wget -T 30 -t 5 "https://www.linuxfromscratch.org/patches/blfs/12.0/gpm-1.20.7-consolidated-1.patch"
+  fi
+fi
+[ "$SRC_DIR" != "$BUILD_DIR" ] && ln -sf "$SRC_DIR/$PATCH" "$BUILD_DIR"
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+patch -Np1 -i ../gpm-1.20.7-consolidated-1.patch
+./autogen.sh
+./configure --prefix=/usr --sysconfdir=/etc
+make
+make -j1 install
+
+install-info --dir-file=/usr/share/info/dir           \
+             /usr/share/info/gpm.info
+
+rm -fv /usr/lib/libgpm.a
+ln -sfv libgpm.so.2.1.0 /usr/lib/libgpm.so
+install -v -m644 conf/gpm-root.conf /etc
+
+install -v -m755 -d /usr/share/doc/gpm-1.20.7/support
+install -v -m644    doc/support/*                     \
+                    /usr/share/doc/gpm-1.20.7/support
+install -v -m644    doc/{FAQ,HACK_GPM,README*}        \
+                    /usr/share/doc/gpm-1.20.7
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+BOOTPKG_DIR=blfs-systemd-units
+
+BOOTSRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${BOOTPKG_DIR}}
+BOOTBUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${BOOTPKG_DIR}}
+mkdir -p $BOOTSRC_DIR
+mkdir -p $BOOTBUILD_DIR
+
+pushd $BOOTSRC_DIR
+URL=https://www.linuxfromscratch.org/blfs/downloads/12.0-systemd/blfs-systemd-units-20230816.tar.xz
+BOOTPACKG=$(basename $URL)
+if [[ ! -f $BOOTPACKG ]] ; then
+  if [[ -f $JH_SRC_ARCHIVE/$BOOTPACKG ]] ; then
+    cp $JH_SRC_ARCHIVE/$BOOTPACKG $BOOTPACKG
+  else
+    wget -T 30 -t 5 $URL
+  fi
+  rm -f $BOOTBUILD_DIR/unpacked
+fi
+
+cd $BOOTBUILD_DIR
+if [[ -e unpacked ]] ; then
+  BOOTUNPACKDIR=`head -n1 unpacked | sed 's@^./@@;s@/.*@@'`
+  if ! [[ -d $BOOTUNPACKDIR ]]; then
+    tar -xvf $BOOTSRC_DIR/$BOOTPACKG > unpacked
+    BOOTUNPACKDIR=`head -n1 unpacked | sed 's@^./@@;s@/.*@@'`
+  fi
+else
+  tar -xvf $BOOTSRC_DIR/$BOOTPACKG > unpacked
+  BOOTUNPACKDIR=`head -n1 unpacked | sed 's@^./@@;s@/.*@@'`
+fi
+cd $BOOTUNPACKDIR
+make install-gpm
+popd
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/014-z-lynx diff/blfs_root/scripts/014-z-lynx
--- org/blfs_root/scripts/014-z-lynx	2024-03-03 14:58:13.012339048 +0000
+++ diff/blfs_root/scripts/014-z-lynx	2024-03-03 15:34:18.384990172 +0000
@@ -89,6 +89,8 @@
             --with-screen=ncursesw \
             --enable-locale-charset
 make
+export INSTALLWATCHFILE=/var/lib/iwlog/lynx2.8.9rel.1.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 install-full
 chgrp -v -R root /usr/share/doc/lynx-2.8.9rel.1/lynx_doc
 
@@ -109,4 +111,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/014-z-lynx.org diff/blfs_root/scripts/014-z-lynx.org
--- org/blfs_root/scripts/014-z-lynx.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/014-z-lynx.org	2024-03-03 15:03:54.238377907 +0000
@@ -0,0 +1,112 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=lynx
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=lynx2.8.9rel.1.tar.bz2
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://invisible-mirror.net/archives/lynx/tarballs/lynx2.8.9rel.1.tar.bz2"
+  fi
+fi
+echo "44316f1b8a857b59099927edc26bef79  $PACKAGE" | md5sum -c -
+
+PATCH=lynx-2.8.9rel.1-security_fix-1.patch
+if [[ ! -f $PATCH ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PATCH" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PATCH" "$PATCH"
+  else
+    wget -T 30 -t 5 "https://www.linuxfromscratch.org/patches/blfs/12.0/lynx-2.8.9rel.1-security_fix-1.patch"
+  fi
+fi
+[ "$SRC_DIR" != "$BUILD_DIR" ] && ln -sf "$SRC_DIR/$PATCH" "$BUILD_DIR"
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+patch -p1 -i ../lynx-2.8.9rel.1-security_fix-1.patch
+./configure --prefix=/usr          \
+            --sysconfdir=/etc/lynx \
+            --datadir=/usr/share/doc/lynx-2.8.9rel.1 \
+            --with-zlib            \
+            --with-bzlib           \
+            --with-ssl             \
+            --with-screen=ncursesw \
+            --enable-locale-charset
+make
+make -j1 install-full
+chgrp -v -R root /usr/share/doc/lynx-2.8.9rel.1/lynx_doc
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+sed -e '/#LOCALE/     a LOCALE_CHARSET:TRUE'     \
+    -i /etc/lynx/lynx.cfg
+sed -e '/#DEFAULT_ED/ a DEFAULT_EDITOR:vi'       \
+    -i /etc/lynx/lynx.cfg
+sed -e '/#PERSIST/    a PERSISTENT_COOKIES:TRUE' \
+    -i /etc/lynx/lynx.cfg
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/blfs_root/scripts/015-z-sudo diff/blfs_root/scripts/015-z-sudo
--- org/blfs_root/scripts/015-z-sudo	2024-03-03 14:58:13.809340915 +0000
+++ diff/blfs_root/scripts/015-z-sudo	2024-03-03 15:34:18.491990543 +0000
@@ -81,6 +81,8 @@
 #      | tee make -k-check.log || true
 #grep || true
 #      failed make -k-check.log || true
+export INSTALLWATCHFILE=/var/lib/iwlog/sudo-1.9.14p3.iwlog.raw
+export LD_PRELOAD=/usr/lib/installwatch.so
 make -j1 install
 ln -sfv libsudo_util.so.0.0.0 /usr/lib/sudo/libsudo_util.so.0
 
@@ -91,11 +93,13 @@
 done
 ldconfig
 
+touch /etc/sudoers.d/00-sudo
 cat > /etc/sudoers.d/00-sudo << "EOF"
 Defaults secure_path="/usr/sbin:/usr/bin"
 %wheel ALL=(ALL) ALL
 EOF
 mkdir -p /etc/pam.d
+touch /etc/pam.d/sudo
 cat > /etc/pam.d/sudo << "EOF"
 # Begin /etc/pam.d/sudo
 
@@ -118,4 +122,6 @@
 cd $BUILD_DIR
 [[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
 
+unset INSTALLWATCHFILE
+unset LD_PRELOAD
 exit
diff -Nuar org/blfs_root/scripts/015-z-sudo.org diff/blfs_root/scripts/015-z-sudo.org
--- org/blfs_root/scripts/015-z-sudo.org	1970-01-01 00:00:00.000000000 +0000
+++ diff/blfs_root/scripts/015-z-sudo.org	2024-03-03 15:03:55.017380718 +0000
@@ -0,0 +1,121 @@
+#!/bin/bash
+set -e
+# Variables coming from configuration
+export JH_PACK_INSTALL="/blfs_root/packInstall.sh"
+export JH_SRC_ARCHIVE="/sources"
+export JH_SRC_SUBDIRS=""
+export JH_BUILD_ROOT="/sources"
+export JH_BUILD_SUBDIRS="y"
+export JH_KEEP_FILES=""
+unset CFLAGS
+unset CXXFLAGS
+unset LDFLAGS
+export MAKEFLAGS="-j$(nproc)"
+unset NINJAJOBS
+unset MAKELEVEL
+unset MAKE_TERMOUT
+unset MAKE_TERMERR
+if [ -r /etc/profile ]; then source /etc/profile; fi
+# End of environment
+export JH_PKG_DIR=sudo
+SRC_DIR=${JH_SRC_ARCHIVE}${JH_SRC_SUBDIRS:+/${JH_PKG_DIR}}
+BUILD_DIR=${JH_BUILD_ROOT}${JH_BUILD_SUBDIRS:+/${JH_PKG_DIR}}
+mkdir -p $SRC_DIR
+mkdir -p $BUILD_DIR
+
+cd $SRC_DIR
+PACKAGE=sudo-1.9.14p3.tar.gz
+if [[ ! -f $PACKAGE ]] ; then
+  if [ -f "$JH_SRC_ARCHIVE/$PACKAGE" ] ; then
+    cp "$JH_SRC_ARCHIVE/$PACKAGE" "$PACKAGE"
+  else
+    wget -T 30 -t 5 "https://www.sudo.ws/dist/sudo-1.9.14p3.tar.gz"
+  fi
+fi
+echo "4cc21cf7c9a89290b230954aed0d1e11  $PACKAGE" | md5sum -c -
+
+cd $BUILD_DIR
+find . -maxdepth 1 -mindepth 1 -type d | xargs rm -rf
+
+case $PACKAGE in
+  *.tar.gz|*.tar.bz2|*.tar.xz|*.tgz|*.tar.lzma)
+     tar -xvf $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR=`grep '[^./]\+' unpacked | head -n1 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.tar.lz)
+     bsdtar -xvf $SRC_DIR/$PACKAGE 2> unpacked
+     JH_UNPACKDIR=`head -n1 unpacked | cut  -d" " -f2 | sed 's@^\./@@;s@/.*@@'`
+     ;;
+  *.zip)
+     zipinfo -1 $SRC_DIR/$PACKAGE > unpacked
+     JH_UNPACKDIR="$(sed 's@/.*@@' unpacked | uniq )"
+     if test $(wc -w <<< $JH_UNPACKDIR) -eq 1; then
+       unzip $SRC_DIR/$PACKAGE
+     else
+       JH_UNPACKDIR=${PACKAGE%.zip}
+       unzip -d $JH_UNPACKDIR $SRC_DIR/$PACKAGE
+     fi
+     ;;
+  *)
+     JH_UNPACKDIR=$JH_PKG_DIR-build
+     mkdir $JH_UNPACKDIR
+     cp $SRC_DIR/$PACKAGE $JH_UNPACKDIR
+     ADDITIONAL="$(find . -mindepth 1 -maxdepth 1 -type l)"
+     if [ -n "$ADDITIONAL" ]; then
+         cp $ADDITIONAL $JH_UNPACKDIR
+     fi
+     ;;
+esac
+export JH_UNPACKDIR
+cd $JH_UNPACKDIR
+
+./configure --prefix=/usr              \
+            --libexecdir=/usr/lib      \
+            --with-secure-path         \
+            --with-all-insults         \
+            --with-env-editor          \
+            --docdir=/usr/share/doc/sudo-1.9.14p3 \
+            --with-passprompt="[sudo] password for %p: "
+make
+#env LC_ALL=C make -k check 2>&1 || true
+#      | tee make -k-check.log || true
+#grep || true
+#      failed make -k-check.log || true
+make -j1 install
+ln -sfv libsudo_util.so.0.0.0 /usr/lib/sudo/libsudo_util.so.0
+
+for libdir in /lib /usr/lib $(find /opt -name lib); do
+  find $libdir -name \*.la           \
+             ! -path \*ImageMagick\* \
+               -delete
+done
+ldconfig
+
+cat > /etc/sudoers.d/00-sudo << "EOF"
+Defaults secure_path="/usr/sbin:/usr/bin"
+%wheel ALL=(ALL) ALL
+EOF
+mkdir -p /etc/pam.d
+cat > /etc/pam.d/sudo << "EOF"
+# Begin /etc/pam.d/sudo
+
+# include the default auth settings
+auth      include     system-auth
+
+# include the default account settings
+account   include     system-account
+
+# Set default environment variables for the service user
+session   required    pam_env.so
+
+# include system session defaults
+session   include     system-session
+
+# End /etc/pam.d/sudo
+EOF
+chmod 644 /etc/pam.d/sudo
+
+cd $BUILD_DIR
+[[ -n "$JH_KEEP_FILES" ]] || rm -rf $JH_UNPACKDIR unpacked
+
+exit
diff -Nuar org/jhalfs/lfs-commands/chapter05/503-linux-headers diff/jhalfs/lfs-commands/chapter05/503-linux-headers
--- org/jhalfs/lfs-commands/chapter05/503-linux-headers	2024-03-03 14:55:51.488063817 +0000
+++ diff/jhalfs/lfs-commands/chapter05/503-linux-headers	2024-03-03 15:32:52.822696308 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/503-linux-headers
 
 PACKAGE=linux-6.4.12.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -38,7 +40,11 @@
 make headers
 find usr/include -type f ! -name '*.h' -delete
 
-cp -rv usr/include $LFS/usr
+mkdir -pv $PKG_DEST/usr
+cp -rv usr/include $PKG_DEST/usr
+
+packInstall
+
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/801-man-pages diff/jhalfs/lfs-commands/chapter08/801-man-pages
--- org/jhalfs/lfs-commands/chapter08/801-man-pages	2024-03-03 14:55:51.498063833 +0000
+++ diff/jhalfs/lfs-commands/chapter08/801-man-pages	2024-03-03 15:32:40.957656025 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/801-man-pages
 
 PACKAGE=man-pages-6.05.01.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -35,7 +37,37 @@
 
 # Start of LFS book script
 rm -v man3/crypt*
-make -j1 prefix=/usr install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST prefix=/usr install
+#rm -fv $PKG_DEST/usr/share/man/{man3/getspnam.3,man5/passwd.5}
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/802-iana-etc diff/jhalfs/lfs-commands/chapter08/802-iana-etc
--- org/jhalfs/lfs-commands/chapter08/802-iana-etc	2024-03-03 14:55:51.498063833 +0000
+++ diff/jhalfs/lfs-commands/chapter08/802-iana-etc	2024-03-03 15:01:42.488927243 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/802-iana-etc
 
 PACKAGE=iana-etc-20230810.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -34,7 +36,36 @@
 SECONDS=${PREV_SEC}
 
 # Start of LFS book script
-cp services protocols /etc
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+cp services protocols $PKG_DEST/etc
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/803-glibc diff/jhalfs/lfs-commands/chapter08/803-glibc
--- org/jhalfs/lfs-commands/chapter08/803-glibc	2024-03-03 14:55:51.504063842 +0000
+++ diff/jhalfs/lfs-commands/chapter08/803-glibc	2024-03-03 15:32:40.960656035 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/803-glibc
 
 PACKAGE=glibc-2.38.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -47,14 +49,51 @@
              libc_cv_slibdir=/usr/lib
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-touch /etc/ld.so.conf
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+touch $PKG_DEST/etc/ld.so.conf
 sed '/test-installation/s@$(PERL)@echo not running@' -i ../Makefile
-make -j1 install
-sed '/RTLDLIST=/s@/usr@@g' -i /usr/bin/ldd
-cp -v ../nscd/nscd.conf /etc/nscd.conf
-mkdir -pv /var/cache/nscd
-install -v -Dm644 ../nscd/nscd.tmpfiles /usr/lib/tmpfiles.d/nscd.conf
-install -v -Dm644 ../nscd/nscd.service /usr/lib/systemd/system/nscd.service
+make install_root=$PKG_DEST -j1 install
+
+sed '/RTLDLIST=/s@/usr@@g' -i $PKG_DEST/usr/bin/ldd
+cp -v ../nscd/nscd.conf $PKG_DEST/etc/nscd.conf
+mkdir -pv $PKG_DEST/var/cache/nscd
+install -v -Dm644 ../nscd/nscd.tmpfiles $PKG_DEST/usr/lib/tmpfiles.d/nscd.conf
+install -v -Dm644 ../nscd/nscd.service $PKG_DEST/usr/lib/systemd/system/nscd.service
+
+cp -a /etc/localtime $PKG_DEST/etc
+cp -a /etc/nsswitch.conf $PKG_DEST/etc
+cp -a /etc/ld.so.conf $PKG_DEST/etc
+cp -a /lib64/* $PKG_DEST/lib64
+cp -a /usr/lib/locale $PKG_DEST/usr/lib
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 mkdir -pv /usr/lib/locale
 localedef -i POSIX -f UTF-8 C.UTF-8 2> /dev/null || true
 localedef -i cs_CZ -f UTF-8 cs_CZ.UTF-8
@@ -108,9 +147,14 @@
 
 # End /etc/nsswitch.conf
 EOF
+
+OLD_PKG_DEST="$PKG_DEST"
+OLD_PKGDIR=$PKGDIR
+PKG_DEST=$(dirname $OLD_PKG_DEST)/001-tzdata
+PKGDIR=$(dirname $PKGDIR)/tzdata-2023c
 tar -xf ../../tzdata2023c.tar.gz
 
-ZONEINFO=/usr/share/zoneinfo
+ZONEINFO=$PKG_DEST/usr/share/zoneinfo
 mkdir -pv $ZONEINFO/{posix,right}
 
 for tz in etcetera southamerica northamerica europe africa antarctica  \
@@ -123,6 +167,15 @@
 cp -v zone.tab zone1970.tab iso3166.tab $ZONEINFO
 zic -d $ZONEINFO -p America/New_York
 unset ZONEINFO
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
+
+PKG_DEST=$OLD_PKG_DEST
+unset OLD_PKG_DEST
+PKGDIR=$OLD_PKGDIR
+unset OLD_PKGDIR
 ln -sfv /usr/share/zoneinfo/GMT /etc/localtime
 cat > /etc/ld.so.conf << "EOF"
 # Begin /etc/ld.so.conf
diff -Nuar org/jhalfs/lfs-commands/chapter08/804-zlib diff/jhalfs/lfs-commands/chapter08/804-zlib
--- org/jhalfs/lfs-commands/chapter08/804-zlib	2024-03-03 14:55:51.505063843 +0000
+++ diff/jhalfs/lfs-commands/chapter08/804-zlib	2024-03-03 15:01:42.495927266 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/804-zlib
 
 PACKAGE=zlib-1.2.13.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,8 +39,37 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-rm -fv /usr/lib/libz.a
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+rm -fv $PKG_DEST/usr/lib/libz.a
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/805-bzip2 diff/jhalfs/lfs-commands/chapter08/805-bzip2
--- org/jhalfs/lfs-commands/chapter08/805-bzip2	2024-03-03 14:55:51.505063843 +0000
+++ diff/jhalfs/lfs-commands/chapter08/805-bzip2	2024-03-03 15:01:42.495927266 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/805-bzip2
 
 PACKAGE=bzip2-1.0.8.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -40,14 +42,44 @@
 make -f Makefile-libbz2_so
 make clean
 make
-make -j1 PREFIX=/usr install
-cp -av libbz2.so.* /usr/lib
-ln -sv libbz2.so.1.0.8 /usr/lib/libbz2.so
-cp -v bzip2-shared /usr/bin/bzip2
-for i in /usr/bin/{bzcat,bunzip2}; do
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 PREFIX=$PKG_DEST/usr install
+
+cp -av libbz2.so.* $PKG_DEST/usr/lib
+ln -sv libbz2.so.1.0.8 $PKG_DEST/usr/lib/libbz2.so
+cp -v bzip2-shared $PKG_DEST/usr/bin/bzip2
+for i in $PKG_DEST/usr/bin/{bzcat,bunzip2}; do
   ln -sfv bzip2 $i
 done
-rm -fv /usr/lib/libbz2.a
+rm -fv $PKG_DEST/usr/lib/libbz2.a
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/806-xz diff/jhalfs/lfs-commands/chapter08/806-xz
--- org/jhalfs/lfs-commands/chapter08/806-xz	2024-03-03 14:55:51.505063843 +0000
+++ diff/jhalfs/lfs-commands/chapter08/806-xz	2024-03-03 15:01:42.495927266 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/806-xz
 
 PACKAGE=xz-5.4.4.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,7 +41,36 @@
             --docdir=/usr/share/doc/xz-5.4.4
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/807-zstd diff/jhalfs/lfs-commands/chapter08/807-zstd
--- org/jhalfs/lfs-commands/chapter08/807-zstd	2024-03-03 14:55:51.506063845 +0000
+++ diff/jhalfs/lfs-commands/chapter08/807-zstd	2024-03-03 15:01:42.496927269 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/807-zstd
 
 PACKAGE=zstd-1.5.5.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -36,8 +38,37 @@
 # Start of LFS book script
 make prefix=/usr
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 prefix=/usr install
-rm -v /usr/lib/libzstd.a
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST prefix=/usr install
+rm -v $PKG_DEST/usr/lib/libzstd.a
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/808-file diff/jhalfs/lfs-commands/chapter08/808-file
--- org/jhalfs/lfs-commands/chapter08/808-file	2024-03-03 14:55:51.506063845 +0000
+++ diff/jhalfs/lfs-commands/chapter08/808-file	2024-03-03 15:01:42.496927269 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/808-file
 
 PACKAGE=file-5.45.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/809-readline diff/jhalfs/lfs-commands/chapter08/809-readline
--- org/jhalfs/lfs-commands/chapter08/809-readline	2024-03-03 14:55:51.506063845 +0000
+++ diff/jhalfs/lfs-commands/chapter08/809-readline	2024-03-03 15:01:42.496927269 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/809-readline
 
 PACKAGE=readline-8.2.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -42,8 +44,37 @@
             --with-curses    \
             --docdir=/usr/share/doc/readline-8.2
 make SHLIB_LIBS="-lncursesw"
-make -j1 SHLIB_LIBS="-lncursesw" install
-install -v -m644 doc/*.{ps,pdf,html,dvi} /usr/share/doc/readline-8.2
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST SHLIB_LIBS="-lncursesw" install
+install -v -m644 doc/*.{ps,pdf,html,dvi} $PKG_DEST/usr/share/doc/readline-8.2
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/810-m4 diff/jhalfs/lfs-commands/chapter08/810-m4
--- org/jhalfs/lfs-commands/chapter08/810-m4	2024-03-03 14:55:51.506063845 +0000
+++ diff/jhalfs/lfs-commands/chapter08/810-m4	2024-03-03 15:01:42.497927272 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/810-m4
 
 PACKAGE=m4-1.4.19.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/811-bc diff/jhalfs/lfs-commands/chapter08/811-bc
--- org/jhalfs/lfs-commands/chapter08/811-bc	2024-03-03 14:55:51.507063846 +0000
+++ diff/jhalfs/lfs-commands/chapter08/811-bc	2024-03-03 15:01:42.497927272 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/811-bc
 
 PACKAGE=bc-6.6.0.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 CC=gcc ./configure --prefix=/usr -G -O3 -r
 make
 # make -k test >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/812-flex diff/jhalfs/lfs-commands/chapter08/812-flex
--- org/jhalfs/lfs-commands/chapter08/812-flex	2024-03-03 14:55:51.507063846 +0000
+++ diff/jhalfs/lfs-commands/chapter08/812-flex	2024-03-03 15:01:42.497927272 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/812-flex
 
 PACKAGE=flex-2.6.4.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,9 +41,38 @@
             --disable-static
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-ln -sv flex   /usr/bin/lex
-ln -sv flex.1 /usr/share/man/man1/lex.1
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+ln -sv flex   $PKG_DEST/usr/bin/lex
+ln -sv flex.1 $PKG_DEST/usr/share/man/man1/lex.1
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/813-tcl diff/jhalfs/lfs-commands/chapter08/813-tcl
--- org/jhalfs/lfs-commands/chapter08/813-tcl	2024-03-03 14:55:51.507063846 +0000
+++ diff/jhalfs/lfs-commands/chapter08/813-tcl	2024-03-03 15:01:42.498927275 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/813-tcl
 
 PACKAGE=tcl8.6.13-src.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -57,15 +59,44 @@
 
 unset SRCDIR
 # make -k test >> $TEST_LOG 2>&1 || true
-make -j1 install
-chmod -v u+w /usr/lib/libtcl8.6.so
-make -j1 install-private-headers
-ln -sfv tclsh8.6 /usr/bin/tclsh
-mv /usr/share/man/man3/{Thread,Tcl_Thread}.3
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+chmod -v u+w $PKG_DEST/usr/lib/libtcl8.6.so
+make -j1 DESTDIR=$PKG_DEST install-private-headers
+ln -sfv tclsh8.6 $PKG_DEST/usr/bin/tclsh
+mv $PKG_DEST/usr/share/man/man3/{Thread,Tcl_Thread}.3
 cd ..
 tar -xf ../tcl8.6.13-html.tar.gz --strip-components=1
-mkdir -v -p /usr/share/doc/tcl-8.6.13
-cp -v -r  ./html/* /usr/share/doc/tcl-8.6.13
+mkdir -v -p $PKG_DEST/usr/share/doc/tcl-8.6.13
+cp -v -r  ./html/* $PKG_DEST/usr/share/doc/tcl-8.6.13
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/814-expect diff/jhalfs/lfs-commands/chapter08/814-expect
--- org/jhalfs/lfs-commands/chapter08/814-expect	2024-03-03 14:55:51.508063848 +0000
+++ diff/jhalfs/lfs-commands/chapter08/814-expect	2024-03-03 15:01:42.498927275 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/814-expect
 
 PACKAGE=expect5.45.4.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -41,8 +43,37 @@
             --with-tclinclude=/usr/include
 make
 # make -k test >> $TEST_LOG 2>&1 || true
-make -j1 install
-ln -svf expect5.45.4/libexpect5.45.4.so /usr/lib
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+ln -svf expect5.45.4/libexpect5.45.4.so $PKG_DEST/usr/lib
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/815-dejagnu diff/jhalfs/lfs-commands/chapter08/815-dejagnu
--- org/jhalfs/lfs-commands/chapter08/815-dejagnu	2024-03-03 14:55:51.508063848 +0000
+++ diff/jhalfs/lfs-commands/chapter08/815-dejagnu	2024-03-03 15:01:42.498927275 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/815-dejagnu
 
 PACKAGE=dejagnu-1.6.3.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -40,9 +42,38 @@
 makeinfo --html --no-split -o doc/dejagnu.html ../doc/dejagnu.texi
 makeinfo --plaintext       -o doc/dejagnu.txt  ../doc/dejagnu.texi
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-install -v -dm755  /usr/share/doc/dejagnu-1.6.3
-install -v -m644   doc/dejagnu.{html,txt} /usr/share/doc/dejagnu-1.6.3
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+install -v -dm755  $PKG_DEST/usr/share/doc/dejagnu-1.6.3
+install -v -m644   doc/dejagnu.{html,txt} $PKG_DEST/usr/share/doc/dejagnu-1.6.3
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/816-binutils diff/jhalfs/lfs-commands/chapter08/816-binutils
--- org/jhalfs/lfs-commands/chapter08/816-binutils	2024-03-03 14:55:51.508063848 +0000
+++ diff/jhalfs/lfs-commands/chapter08/816-binutils	2024-03-03 15:01:42.499927279 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/816-binutils
 
 PACKAGE=binutils-2.41.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -48,8 +50,37 @@
 make tooldir=/usr
 # make -k check >> $TEST_LOG 2>&1 || true
 # grep '^FAIL:' $(find -name '*.log') >> $TEST_LOG 2>&1 || true
-make -j1 tooldir=/usr install
-rm -fv /usr/lib/lib{bfd,ctf,ctf-nobfd,gprofng,opcodes,sframe}.a
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST tooldir=/usr install
+rm -fv $PKG_DEST/usr/lib/lib{bfd,ctf,ctf-nobfd,gprofng,opcodes,sframe}.a
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/817-gmp diff/jhalfs/lfs-commands/chapter08/817-gmp
--- org/jhalfs/lfs-commands/chapter08/817-gmp	2024-03-03 14:55:51.509063849 +0000
+++ diff/jhalfs/lfs-commands/chapter08/817-gmp	2024-03-03 15:01:42.499927279 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/817-gmp
 
 PACKAGE=gmp-6.3.0.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -42,8 +44,37 @@
 make html
 # make -k check 2>&1 | tee gmp-check-log >> $TEST_LOG 2>&1 || true
 # awk '/# PASS:/{total+=$3} ; END{print total}' gmp-check-log >> $TEST_LOG 2>&1 || true
-make -j1 install
-make install-html
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+make -j1 DESTDIR=$PKG_DEST install-html
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/818-mpfr diff/jhalfs/lfs-commands/chapter08/818-mpfr
--- org/jhalfs/lfs-commands/chapter08/818-mpfr	2024-03-03 14:55:51.509063849 +0000
+++ diff/jhalfs/lfs-commands/chapter08/818-mpfr	2024-03-03 15:01:42.500927282 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/818-mpfr
 
 PACKAGE=mpfr-4.2.0.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -44,8 +46,37 @@
 make
 make html
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-make install-html
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+make -j1 DESTDIR=$PKG_DEST install-html
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/819-mpc diff/jhalfs/lfs-commands/chapter08/819-mpc
--- org/jhalfs/lfs-commands/chapter08/819-mpc	2024-03-03 14:55:51.509063849 +0000
+++ diff/jhalfs/lfs-commands/chapter08/819-mpc	2024-03-03 15:01:42.500927282 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/819-mpc
 
 PACKAGE=mpc-1.3.1.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -40,8 +42,37 @@
 make
 make html
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-make install-html
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+make -j1 DESTDIR=$PKG_DEST install-html
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/820-attr diff/jhalfs/lfs-commands/chapter08/820-attr
--- org/jhalfs/lfs-commands/chapter08/820-attr	2024-03-03 14:55:51.509063849 +0000
+++ diff/jhalfs/lfs-commands/chapter08/820-attr	2024-03-03 15:01:42.500927282 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/820-attr
 
 PACKAGE=attr-2.5.1.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -40,7 +42,36 @@
             --docdir=/usr/share/doc/attr-2.5.1
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/821-acl diff/jhalfs/lfs-commands/chapter08/821-acl
--- org/jhalfs/lfs-commands/chapter08/821-acl	2024-03-03 14:55:51.510063851 +0000
+++ diff/jhalfs/lfs-commands/chapter08/821-acl	2024-03-03 15:01:42.500927282 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/821-acl
 
 PACKAGE=acl-2.3.1.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -38,7 +40,36 @@
             --disable-static      \
             --docdir=/usr/share/doc/acl-2.3.1
 make
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/822-libcap diff/jhalfs/lfs-commands/chapter08/822-libcap
--- org/jhalfs/lfs-commands/chapter08/822-libcap	2024-03-03 14:55:51.510063851 +0000
+++ diff/jhalfs/lfs-commands/chapter08/822-libcap	2024-03-03 15:01:42.501927285 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/822-libcap
 
 PACKAGE=libcap-2.69.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 sed -i '/install -m.*STA/d' libcap/Makefile
 make prefix=/usr lib=lib
 # make -k test >> $TEST_LOG 2>&1 || true
-make -j1 prefix=/usr lib=lib install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST prefix=/usr lib=lib install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/823-libxcrypt diff/jhalfs/lfs-commands/chapter08/823-libxcrypt
--- org/jhalfs/lfs-commands/chapter08/823-libxcrypt	2024-03-03 14:55:51.510063851 +0000
+++ diff/jhalfs/lfs-commands/chapter08/823-libxcrypt	2024-03-03 15:01:42.501927285 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/823-libxcrypt
 
 PACKAGE=libxcrypt-4.4.36.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -41,7 +43,36 @@
             --disable-failure-tokens
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/824-shadow diff/jhalfs/lfs-commands/chapter08/824-shadow
--- org/jhalfs/lfs-commands/chapter08/824-shadow	2024-03-03 14:55:51.511063852 +0000
+++ diff/jhalfs/lfs-commands/chapter08/824-shadow	2024-03-03 15:32:40.961656038 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/824-shadow
 
 PACKAGE=shadow-4.13.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -48,8 +50,44 @@
             --with-{b,yes}crypt \
             --with-group-name-max-length=32
 make
-make -j1 exec_prefix=/usr install
-make -C man install-man
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST exec_prefix=/usr install
+make -j1 DESTDIR=$PKG_DEST -C man install-man
+
+cp -a /etc/default $PKG_DEST/etc/
+cp -a /etc/gshadow $PKG_DEST/etc
+cp -a /etc/shadow $PKG_DEST/etc
+
+#rm -fv $PKG_DEST/usr/share/man/man8/nologin.8
+#rm -fv $PKG_DEST/sbin/nologin
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 pwconv
 grpconv
 mkdir -p /etc/default
diff -Nuar org/jhalfs/lfs-commands/chapter08/825-gcc diff/jhalfs/lfs-commands/chapter08/825-gcc
--- org/jhalfs/lfs-commands/chapter08/825-gcc	2024-03-03 14:55:51.511063852 +0000
+++ diff/jhalfs/lfs-commands/chapter08/825-gcc	2024-03-03 15:32:40.963656045 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/825-gcc
 
 PACKAGE=gcc-13.2.0.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -56,15 +58,48 @@
 # chown -Rv tester . >> $TEST_LOG 2>&1 || true
 # su tester -c "PATH=$PATH make -k check" >> $TEST_LOG 2>&1 || true
 # ../contrib/test_summary >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
 chown -v -R root:root \
-    /usr/lib/gcc/$(gcc -dumpmachine)/13.2.0/include{,-fixed}
-ln -svr /usr/bin/cpp /usr/lib
-ln -sv gcc.1 /usr/share/man/man1/cc.1
-ln -sfv ../../libexec/gcc/$(gcc -dumpmachine)/13.2.0/liblto_plugin.so \
-        /usr/lib/bfd-plugins/
-mkdir -pv /usr/share/gdb/auto-load/usr/lib
-mv -v /usr/lib/*gdb.py /usr/share/gdb/auto-load/usr/lib
+    $PKG_DEST/usr/lib/gcc/$(gcc/xgcc -dumpmachine)/13.2.0/include{,-fixed}
+ln -svr $PKG_DEST/usr/bin/cpp $PKG_DEST/usr/lib
+ln -sv gcc.1 $PKG_DEST/usr/share/man/man1/cc.1
+mkdir -pv $PKG_DEST/usr/lib/bfd-plugins
+ln -sfv ../../libexec/gcc/$(gcc/xgcc -dumpmachine)/13.2.0/liblto_plugin.so \
+        $PKG_DEST/usr/lib/bfd-plugins/
+mkdir -pv $PKG_DEST/usr/share/gdb/auto-load/usr/lib
+mv -v $PKG_DEST/usr/lib/*gdb.py $PKG_DEST/usr/share/gdb/auto-load/usr/lib
+
+cp -a /usr/bin/cc $PKG_DEST/usr/bin
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo 'int main(){}' > dummy.c
 cc dummy.c -v -Wl,--verbose &> dummy.log
 readelf -l a.out | grep ': /lib'
diff -Nuar org/jhalfs/lfs-commands/chapter08/826-pkgconf diff/jhalfs/lfs-commands/chapter08/826-pkgconf
--- org/jhalfs/lfs-commands/chapter08/826-pkgconf	2024-03-03 14:55:51.512063854 +0000
+++ diff/jhalfs/lfs-commands/chapter08/826-pkgconf	2024-03-03 15:01:42.503927292 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/826-pkgconf
 
 PACKAGE=pkgconf-2.0.1.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -38,9 +40,38 @@
             --disable-static           \
             --docdir=/usr/share/doc/pkgconf-2.0.1
 make
-make -j1 install
-ln -sv pkgconf   /usr/bin/pkg-config
-ln -sv pkgconf.1 /usr/share/man/man1/pkg-config.1
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+ln -sv pkgconf   $PKG_DEST/usr/bin/pkg-config
+ln -sv pkgconf.1 $PKG_DEST/usr/share/man/man1/pkg-config.1
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/827-ncurses diff/jhalfs/lfs-commands/chapter08/827-ncurses
--- org/jhalfs/lfs-commands/chapter08/827-ncurses	2024-03-03 14:55:51.512063854 +0000
+++ diff/jhalfs/lfs-commands/chapter08/827-ncurses	2024-03-03 15:01:42.503927292 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/827-ncurses
 
 PACKAGE=ncurses-6.4.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -44,19 +46,48 @@
             --enable-widec          \
             --with-pkg-config-libdir=/usr/lib/pkgconfig
 make
-make -j1 DESTDIR=$PWD/dest install
-install -vm755 dest/usr/lib/libncursesw.so.6.4 /usr/lib
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST DESTDIR=$PWD/dest install
+install -vm755 dest/usr/lib/libncursesw.so.6.4 $PKG_DEST/usr/lib
 rm -v  dest/usr/lib/libncursesw.so.6.4
-cp -av dest/* /
+cp -av dest/* $PKG_DEST/
 for lib in ncurses form panel menu ; do
-    rm -vf                    /usr/lib/lib${lib}.so
-    echo "INPUT(-l${lib}w)" > /usr/lib/lib${lib}.so
-    ln -sfv ${lib}w.pc        /usr/lib/pkgconfig/${lib}.pc
+    rm -vf                    $PKG_DEST/usr/lib/lib${lib}.so
+    echo "INPUT(-l${lib}w)" > $PKG_DEST/usr/lib/lib${lib}.so
+    ln -sfv ${lib}w.pc        $PKG_DEST/usr/lib/pkgconfig/${lib}.pc
 done
-rm -vf                     /usr/lib/libcursesw.so
-echo "INPUT(-lncursesw)" > /usr/lib/libcursesw.so
-ln -sfv libncurses.so      /usr/lib/libcurses.so
-cp -v -R doc -T /usr/share/doc/ncurses-6.4
+rm -vf                     $PKG_DEST/usr/lib/libcursesw.so
+echo "INPUT(-lncursesw)" > $PKG_DEST/usr/lib/libcursesw.so
+ln -sfv libncurses.so      $PKG_DEST/usr/lib/libcurses.so
+cp -v -R doc -T $PKG_DEST/usr/share/doc/ncurses-6.4
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/828-sed diff/jhalfs/lfs-commands/chapter08/828-sed
--- org/jhalfs/lfs-commands/chapter08/828-sed	2024-03-03 14:55:51.512063854 +0000
+++ diff/jhalfs/lfs-commands/chapter08/828-sed	2024-03-03 15:01:42.503927292 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/828-sed
 
 PACKAGE=sed-4.9.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,9 +41,38 @@
 make html
 # chown -Rv tester . >> $TEST_LOG 2>&1 || true
 # su tester -c "PATH=$PATH make -k check" >> $TEST_LOG 2>&1 || true
-make -j1 install
-install -d -m755           /usr/share/doc/sed-4.9
-install -m644 doc/sed.html /usr/share/doc/sed-4.9
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+install -d -m755           $PKG_DEST/usr/share/doc/sed-4.9
+install -m644 doc/sed.html $PKG_DEST/usr/share/doc/sed-4.9
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/829-psmisc diff/jhalfs/lfs-commands/chapter08/829-psmisc
--- org/jhalfs/lfs-commands/chapter08/829-psmisc	2024-03-03 14:55:51.513063855 +0000
+++ diff/jhalfs/lfs-commands/chapter08/829-psmisc	2024-03-03 15:01:42.504927295 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/829-psmisc
 
 PACKAGE=psmisc-23.6.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/830-gettext diff/jhalfs/lfs-commands/chapter08/830-gettext
--- org/jhalfs/lfs-commands/chapter08/830-gettext	2024-03-03 14:55:51.513063855 +0000
+++ diff/jhalfs/lfs-commands/chapter08/830-gettext	2024-03-03 15:01:42.504927295 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/830-gettext
 
 PACKAGE=gettext-0.22.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,8 +41,37 @@
             --docdir=/usr/share/doc/gettext-0.22
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-chmod -v 0755 /usr/lib/preloadable_libintl.so
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+chmod -v 0755 $PKG_DEST/usr/lib/preloadable_libintl.so
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/831-bison diff/jhalfs/lfs-commands/chapter08/831-bison
--- org/jhalfs/lfs-commands/chapter08/831-bison	2024-03-03 14:55:51.513063855 +0000
+++ diff/jhalfs/lfs-commands/chapter08/831-bison	2024-03-03 15:01:42.504927295 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/831-bison
 
 PACKAGE=bison-3.8.2.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr --docdir=/usr/share/doc/bison-3.8.2
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/832-grep diff/jhalfs/lfs-commands/chapter08/832-grep
--- org/jhalfs/lfs-commands/chapter08/832-grep	2024-03-03 14:55:51.514063857 +0000
+++ diff/jhalfs/lfs-commands/chapter08/832-grep	2024-03-03 15:01:42.505927298 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/832-grep
 
 PACKAGE=grep-3.11.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -38,7 +40,36 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/833-bash diff/jhalfs/lfs-commands/chapter08/833-bash
--- org/jhalfs/lfs-commands/chapter08/833-bash	2024-03-03 14:55:51.514063857 +0000
+++ diff/jhalfs/lfs-commands/chapter08/833-bash	2024-03-03 15:32:40.965656052 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/833-bash
 
 PACKAGE=bash-5.2.15.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -47,7 +49,39 @@
 # lassign [wait] _ _ _ value
 # exit $value
 # EOF
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+
+cp -a /usr/bin/sh $PKG_DEST/usr/bin
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/834-libtool diff/jhalfs/lfs-commands/chapter08/834-libtool
--- org/jhalfs/lfs-commands/chapter08/834-libtool	2024-03-03 14:55:51.514063857 +0000
+++ diff/jhalfs/lfs-commands/chapter08/834-libtool	2024-03-03 15:01:42.505927298 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/834-libtool
 
 PACKAGE=libtool-2.4.7.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,8 +39,37 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-rm -fv /usr/lib/libltdl.a
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+rm -fv $PKG_DEST/usr/lib/libltdl.a
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/835-gdbm diff/jhalfs/lfs-commands/chapter08/835-gdbm
--- org/jhalfs/lfs-commands/chapter08/835-gdbm	2024-03-03 14:55:51.515063858 +0000
+++ diff/jhalfs/lfs-commands/chapter08/835-gdbm	2024-03-03 15:01:42.506927301 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/835-gdbm
 
 PACKAGE=gdbm-1.23.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,7 +41,36 @@
             --enable-libgdbm-compat
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/836-gperf diff/jhalfs/lfs-commands/chapter08/836-gperf
--- org/jhalfs/lfs-commands/chapter08/836-gperf	2024-03-03 14:55:51.515063858 +0000
+++ diff/jhalfs/lfs-commands/chapter08/836-gperf	2024-03-03 15:01:42.506927301 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/836-gperf
 
 PACKAGE=gperf-3.1.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr --docdir=/usr/share/doc/gperf-3.1
 make
 # make -k -j1 check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/837-expat diff/jhalfs/lfs-commands/chapter08/837-expat
--- org/jhalfs/lfs-commands/chapter08/837-expat	2024-03-03 14:55:51.515063858 +0000
+++ diff/jhalfs/lfs-commands/chapter08/837-expat	2024-03-03 15:01:42.506927301 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/837-expat
 
 PACKAGE=expat-2.5.0.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,8 +41,37 @@
             --docdir=/usr/share/doc/expat-2.5.0
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-install -v -m644 doc/*.{html,css} /usr/share/doc/expat-2.5.0
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+install -v -m644 doc/*.{html,css} $PKG_DEST/usr/share/doc/expat-2.5.0
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/838-inetutils diff/jhalfs/lfs-commands/chapter08/838-inetutils
--- org/jhalfs/lfs-commands/chapter08/838-inetutils	2024-03-03 14:55:51.515063858 +0000
+++ diff/jhalfs/lfs-commands/chapter08/838-inetutils	2024-03-03 15:01:42.507927304 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/838-inetutils
 
 PACKAGE=inetutils-2.4.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -46,8 +48,37 @@
             --disable-servers
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-mv -v /usr/{,s}bin/ifconfig
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+mv -v $PKG_DEST/usr/{,s}bin/ifconfig
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/839-less diff/jhalfs/lfs-commands/chapter08/839-less
--- org/jhalfs/lfs-commands/chapter08/839-less	2024-03-03 14:55:51.516063860 +0000
+++ diff/jhalfs/lfs-commands/chapter08/839-less	2024-03-03 15:01:42.507927304 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/839-less
 
 PACKAGE=less-643.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr --sysconfdir=/etc
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/840-perl diff/jhalfs/lfs-commands/chapter08/840-perl
--- org/jhalfs/lfs-commands/chapter08/840-perl	2024-03-03 14:55:51.516063860 +0000
+++ diff/jhalfs/lfs-commands/chapter08/840-perl	2024-03-03 15:01:42.507927304 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/840-perl
 
 PACKAGE=perl-5.38.0.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -52,8 +54,37 @@
              -Dusethreads
 make
 # make -k test >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
 unset BUILD_ZLIB BUILD_BZIP2
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/841-xml-parser diff/jhalfs/lfs-commands/chapter08/841-xml-parser
--- org/jhalfs/lfs-commands/chapter08/841-xml-parser	2024-03-03 14:55:51.516063860 +0000
+++ diff/jhalfs/lfs-commands/chapter08/841-xml-parser	2024-03-03 15:01:42.508927308 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/841-xml-parser
 
 PACKAGE=XML-Parser-2.46.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 perl Makefile.PL
 make
 # make -k test >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/842-intltool diff/jhalfs/lfs-commands/chapter08/842-intltool
--- org/jhalfs/lfs-commands/chapter08/842-intltool	2024-03-03 14:55:51.517063861 +0000
+++ diff/jhalfs/lfs-commands/chapter08/842-intltool	2024-03-03 15:01:42.508927308 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/842-intltool
 
 PACKAGE=intltool-0.51.0.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -38,8 +40,37 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-install -v -Dm644 doc/I18N-HOWTO /usr/share/doc/intltool-0.51.0/I18N-HOWTO
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+install -v -Dm644 doc/I18N-HOWTO $PKG_DEST/usr/share/doc/intltool-0.51.0/I18N-HOWTO
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/843-autoconf diff/jhalfs/lfs-commands/chapter08/843-autoconf
--- org/jhalfs/lfs-commands/chapter08/843-autoconf	2024-03-03 14:55:51.517063861 +0000
+++ diff/jhalfs/lfs-commands/chapter08/843-autoconf	2024-03-03 15:01:42.508927308 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/843-autoconf
 
 PACKAGE=autoconf-2.71.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -40,7 +42,36 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/844-automake diff/jhalfs/lfs-commands/chapter08/844-automake
--- org/jhalfs/lfs-commands/chapter08/844-automake	2024-03-03 14:55:51.517063861 +0000
+++ diff/jhalfs/lfs-commands/chapter08/844-automake	2024-03-03 15:01:42.509927311 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/844-automake
 
 PACKAGE=automake-1.16.5.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr --docdir=/usr/share/doc/automake-1.16.5
 make
 # make -k -j4 check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/845-openssl diff/jhalfs/lfs-commands/chapter08/845-openssl
--- org/jhalfs/lfs-commands/chapter08/845-openssl	2024-03-03 14:55:51.518063863 +0000
+++ diff/jhalfs/lfs-commands/chapter08/845-openssl	2024-03-03 15:01:42.509927311 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/845-openssl
 
 PACKAGE=openssl-3.1.2.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -41,10 +43,39 @@
          zlib-dynamic
 make
 # make -k test >> $TEST_LOG 2>&1 || true
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
 sed -i '/INSTALL_LIBS/s/libcrypto.a libssl.a//' Makefile
-make -j1 MANSUFFIX=ssl install
-mv -v /usr/share/doc/openssl /usr/share/doc/openssl-3.1.2
-cp -vfr doc/* /usr/share/doc/openssl-3.1.2
+make -j1 DESTDIR=$PKG_DEST MANSUFFIX=ssl install
+mv -v $PKG_DEST/usr/share/doc/openssl $PKG_DEST/usr/share/doc/openssl-3.1.2
+cp -vfr doc/* $PKG_DEST/usr/share/doc/openssl-3.1.2
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/846-kmod diff/jhalfs/lfs-commands/chapter08/846-kmod
--- org/jhalfs/lfs-commands/chapter08/846-kmod	2024-03-03 14:55:51.518063863 +0000
+++ diff/jhalfs/lfs-commands/chapter08/846-kmod	2024-03-03 15:01:42.509927311 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/846-kmod
 
 PACKAGE=kmod-30.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -41,13 +43,42 @@
             --with-zstd            \
             --with-zlib
 make
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
 
 for target in depmod insmod modinfo modprobe rmmod; do
-  ln -sfv ../bin/kmod /usr/sbin/$target
+  ln -sfv ../bin/kmod $PKG_DEST/usr/sbin/$target
 done
 
-ln -sfv kmod /usr/bin/lsmod
+ln -sfv kmod $PKG_DEST/usr/bin/lsmod
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/847-libelf diff/jhalfs/lfs-commands/chapter08/847-libelf
--- org/jhalfs/lfs-commands/chapter08/847-libelf	2024-03-03 14:55:51.518063863 +0000
+++ diff/jhalfs/lfs-commands/chapter08/847-libelf	2024-03-03 15:01:42.510927314 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/847-libelf
 
 PACKAGE=elfutils-0.189.tar.bz2
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,9 +41,38 @@
             --enable-libdebuginfod=dummy
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 -C libelf install
-install -vm644 config/libelf.pc /usr/lib/pkgconfig
-rm /usr/lib/libelf.a
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST -C libelf install
+install -vm644 config/libelf.pc $PKG_DEST/usr/lib/pkgconfig
+rm $PKG_DEST/usr/lib/libelf.a
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/848-libffi diff/jhalfs/lfs-commands/chapter08/848-libffi
--- org/jhalfs/lfs-commands/chapter08/848-libffi	2024-03-03 14:55:51.519063864 +0000
+++ diff/jhalfs/lfs-commands/chapter08/848-libffi	2024-03-03 15:01:42.510927314 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/848-libffi
 
 PACKAGE=libffi-3.4.4.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,7 +41,36 @@
             --with-gcc-arch=native
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/849-Python diff/jhalfs/lfs-commands/chapter08/849-Python
--- org/jhalfs/lfs-commands/chapter08/849-Python	2024-03-03 14:55:51.519063864 +0000
+++ diff/jhalfs/lfs-commands/chapter08/849-Python	2024-03-03 15:32:40.966656055 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/849-Python
 
 PACKAGE=Python-3.11.4.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -40,20 +42,62 @@
             --with-system-ffi    \
             --enable-optimizations
 make
-make -j1 install
-cat > /etc/pip.conf << EOF
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+
+cp -a /usr/bin/pip3 $PKG_DEST/usr/bin
+cp -a /usr/bin/pip3.11 $PKG_DEST/usr/bin
+
+mkdir -pv $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/_distutils_hack $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/distutils-precedence.pth $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/pip $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/pip-23.1.2.dist-info $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/setuptools $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/setuptools-65.5.0.dist-info $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/pkg_resources $PKG_DEST/usr/lib/python3.11/site-packages/
+
+cat > $PKG_DEST/etc/pip.conf << EOF
 [global]
 root-user-action = ignore
 disable-pip-version-check = true
 EOF
 
-install -v -dm755 /usr/share/doc/python-3.11.4/html
+install -v -dm755 $PKG_DEST/usr/share/doc/python-3.11.4/html
 
 tar --strip-components=1  \
     --no-same-owner       \
     --no-same-permissions \
-    -C /usr/share/doc/python-3.11.4/html \
+    -C $PKG_DEST/usr/share/doc/python-3.11.4/html \
     -xvf ../python-3.11.4-docs-html.tar.bz2
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/850-flit-core diff/jhalfs/lfs-commands/chapter08/850-flit-core
--- org/jhalfs/lfs-commands/chapter08/850-flit-core	2024-03-03 14:55:51.519063864 +0000
+++ diff/jhalfs/lfs-commands/chapter08/850-flit-core	2024-03-03 15:32:40.968656062 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/850-flit-core
 
 PACKAGE=flit_core-3.9.0.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -34,8 +36,42 @@
 SECONDS=${PREV_SEC}
 
 # Start of LFS book script
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
 pip3 wheel -w dist --no-build-isolation --no-deps $PWD
 pip3 install --no-index --no-user --find-links dist flit_core
+
+mkdir -pv $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/flit_core $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/flit_core-3.9.0.dist-info $PKG_DEST/usr/lib/python3.11/site-packages/
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/851-wheel diff/jhalfs/lfs-commands/chapter08/851-wheel
--- org/jhalfs/lfs-commands/chapter08/851-wheel	2024-03-03 14:55:51.519063864 +0000
+++ diff/jhalfs/lfs-commands/chapter08/851-wheel	2024-03-03 15:32:40.970656069 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/851-wheel
 
 PACKAGE=wheel-0.41.1.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -35,7 +37,43 @@
 
 # Start of LFS book script
 pip3 wheel -w dist --no-build-isolation --no-deps $PWD
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
 pip3 install --no-index --find-links=dist wheel
+
+cp -a /usr/bin/wheel $PKG_DEST/usr/bin
+
+mkdir -pv $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/wheel $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/wheel-0.41.1.dist-info $PKG_DEST/usr/lib/python3.11/site-packages/
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/852-ninja diff/jhalfs/lfs-commands/chapter08/852-ninja
--- org/jhalfs/lfs-commands/chapter08/852-ninja	2024-03-03 14:55:51.520063866 +0000
+++ diff/jhalfs/lfs-commands/chapter08/852-ninja	2024-03-03 15:01:42.511927317 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/852-ninja
 
 PACKAGE=ninja-1.11.1.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -43,9 +45,38 @@
 python3 configure.py --bootstrap
 # ./ninja ninja_test >> $TEST_LOG 2>&1 || true
 # ./ninja_test --gtest_filter=-SubprocessTest.SetWithLots >> $TEST_LOG 2>&1 || true
-install -vm755 ninja /usr/bin/
-install -vDm644 misc/bash-completion /usr/share/bash-completion/completions/ninja
-install -vDm644 misc/zsh-completion  /usr/share/zsh/site-functions/_ninja
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+install -vm755 ninja $PKG_DEST/usr/bin/
+install -vDm644 misc/bash-completion $PKG_DEST/usr/share/bash-completion/completions/ninja
+install -vDm644 misc/zsh-completion  $PKG_DEST/usr/share/zsh/site-functions/_ninja
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/853-meson diff/jhalfs/lfs-commands/chapter08/853-meson
--- org/jhalfs/lfs-commands/chapter08/853-meson	2024-03-03 14:55:51.520063866 +0000
+++ diff/jhalfs/lfs-commands/chapter08/853-meson	2024-03-03 15:32:40.971656072 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/853-meson
 
 PACKAGE=meson-1.2.1.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -35,9 +37,47 @@
 
 # Start of LFS book script
 pip3 wheel -w dist --no-build-isolation --no-deps $PWD
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
 pip3 install --no-index --find-links dist meson
-install -vDm644 data/shell-completions/bash/meson /usr/share/bash-completion/completions/meson
-install -vDm644 data/shell-completions/zsh/_meson /usr/share/zsh/site-functions/_meson
+install -vDm644 data/shell-completions/bash/meson $PKG_DEST/usr/share/bash-completion/completions/meson
+install -vDm644 data/shell-completions/zsh/_meson $PKG_DEST/usr/share/zsh/site-functions/_meson
+
+cp -a /usr/bin/meson $PKG_DEST/usr/bin
+mkdir -pv $PKG_DEST/usr/lib/python3.11/site-packages
+cp -a /usr/lib/python3.11/site-packages/meson-1.2.1.dist-info $PKG_DEST/usr/lib/python3.11/site-packages
+cp -a /usr/lib/python3.11/site-packages/mesonbuild $PKG_DEST/usr/lib/python3.11/site-packages
+cp -a /usr/share/man/man1/meson.1 $PKG_DEST/usr/share/man/man1
+mkdir -pv $PKG_DEST/usr/share/polkit-1/actions
+cp -a /usr/share/polkit-1/actions/com.mesonbuild.install.policy $PKG_DEST/usr/share/polkit-1/actions
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/854-coreutils diff/jhalfs/lfs-commands/chapter08/854-coreutils
--- org/jhalfs/lfs-commands/chapter08/854-coreutils	2024-03-03 14:55:51.521063867 +0000
+++ diff/jhalfs/lfs-commands/chapter08/854-coreutils	2024-03-03 15:01:42.512927321 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/854-coreutils
 
 PACKAGE=coreutils-9.3.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -45,10 +47,39 @@
 # chown -Rv tester .  >> $TEST_LOG 2>&1 || true
 # su tester -c "PATH=$PATH make -k RUN_EXPENSIVE_TESTS=yes check" >> $TEST_LOG 2>&1 || true
 # groupdel dummy >> $TEST_LOG 2>&1 || true
-make -j1 install
-mv -v /usr/bin/chroot /usr/sbin
-mv -v /usr/share/man/man1/chroot.1 /usr/share/man/man8/chroot.8
-sed -i 's/"1"/"8"/' /usr/share/man/man8/chroot.8
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+mv -v $PKG_DEST/usr/bin/chroot $PKG_DEST/usr/sbin
+mv -v $PKG_DEST/usr/share/man/man1/chroot.1 $PKG_DEST/usr/share/man/man8/chroot.8
+sed -i 's/"1"/"8"/' $PKG_DEST/usr/share/man/man8/chroot.8
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/855-check diff/jhalfs/lfs-commands/chapter08/855-check
--- org/jhalfs/lfs-commands/chapter08/855-check	2024-03-03 14:55:51.521063867 +0000
+++ diff/jhalfs/lfs-commands/chapter08/855-check	2024-03-03 15:01:42.513927324 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/855-check
 
 PACKAGE=check-0.15.2.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr --disable-static
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 docdir=/usr/share/doc/check-0.15.2 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST docdir=/usr/share/doc/check-0.15.2 install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/856-diffutils diff/jhalfs/lfs-commands/chapter08/856-diffutils
--- org/jhalfs/lfs-commands/chapter08/856-diffutils	2024-03-03 14:55:51.521063867 +0000
+++ diff/jhalfs/lfs-commands/chapter08/856-diffutils	2024-03-03 15:01:42.513927324 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/856-diffutils
 
 PACKAGE=diffutils-3.10.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/857-gawk diff/jhalfs/lfs-commands/chapter08/857-gawk
--- org/jhalfs/lfs-commands/chapter08/857-gawk	2024-03-03 14:55:51.522063869 +0000
+++ diff/jhalfs/lfs-commands/chapter08/857-gawk	2024-03-03 15:01:42.513927324 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/857-gawk
 
 PACKAGE=gawk-5.2.2.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,10 +41,39 @@
 make
 # chown -Rv tester . >> $TEST_LOG 2>&1 || true
 # su tester -c "PATH=$PATH make -k check" >> $TEST_LOG 2>&1 || true
-make -j1 LN='ln -f' install
-ln -sv gawk.1 /usr/share/man/man1/awk.1
-mkdir -pv                                   /usr/share/doc/gawk-5.2.2
-cp    -v doc/{awkforai.txt,*.{eps,pdf,jpg}} /usr/share/doc/gawk-5.2.2
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST LN='ln -f' install
+ln -sv gawk.1 $PKG_DEST/usr/share/man/man1/awk.1
+mkdir -pv                                   $PKG_DEST/usr/share/doc/gawk-5.2.2
+cp    -v doc/{awkforai.txt,*.{eps,pdf,jpg}} $PKG_DEST/usr/share/doc/gawk-5.2.2
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/858-findutils diff/jhalfs/lfs-commands/chapter08/858-findutils
--- org/jhalfs/lfs-commands/chapter08/858-findutils	2024-03-03 14:55:51.522063869 +0000
+++ diff/jhalfs/lfs-commands/chapter08/858-findutils	2024-03-03 15:01:42.514927327 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/858-findutils
 
 PACKAGE=findutils-4.9.0.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -38,7 +40,36 @@
 make
 # chown -Rv tester . >> $TEST_LOG 2>&1 || true
 # su tester -c "PATH=$PATH make -k check" >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/859-groff diff/jhalfs/lfs-commands/chapter08/859-groff
--- org/jhalfs/lfs-commands/chapter08/859-groff	2024-03-03 14:55:51.522063869 +0000
+++ diff/jhalfs/lfs-commands/chapter08/859-groff	2024-03-03 15:01:42.514927327 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/859-groff
 
 PACKAGE=groff-1.23.0.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 PAGE=letter ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/860-grub diff/jhalfs/lfs-commands/chapter08/860-grub
--- org/jhalfs/lfs-commands/chapter08/860-grub	2024-03-03 14:55:51.523063870 +0000
+++ diff/jhalfs/lfs-commands/chapter08/860-grub	2024-03-03 15:01:42.515927330 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/860-grub
 
 PACKAGE=grub-2.06.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -41,8 +43,37 @@
             --disable-efiemu       \
             --disable-werror
 make
-make -j1 install
-mv -v /etc/bash_completion.d/grub /usr/share/bash-completion/completions
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+mv -v $PKG_DEST/etc/bash_completion.d/grub $PKG_DEST/usr/share/bash-completion/completions
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/861-gzip diff/jhalfs/lfs-commands/chapter08/861-gzip
--- org/jhalfs/lfs-commands/chapter08/861-gzip	2024-03-03 14:55:51.523063870 +0000
+++ diff/jhalfs/lfs-commands/chapter08/861-gzip	2024-03-03 15:01:42.515927330 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/861-gzip
 
 PACKAGE=gzip-1.12.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/862-iproute2 diff/jhalfs/lfs-commands/chapter08/862-iproute2
--- org/jhalfs/lfs-commands/chapter08/862-iproute2	2024-03-03 14:55:51.523063870 +0000
+++ diff/jhalfs/lfs-commands/chapter08/862-iproute2	2024-03-03 15:01:42.515927330 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/862-iproute2
 
 PACKAGE=iproute2-6.4.0.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,9 +39,38 @@
 sed -i /ARPD/d Makefile
 rm -fv man/man8/arpd.8
 make NETNS_RUN_DIR=/run/netns
-make -j1 SBINDIR=/usr/sbin install
-mkdir -pv             /usr/share/doc/iproute2-6.4.0
-cp -v COPYING README* /usr/share/doc/iproute2-6.4.0
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST SBINDIR=/usr/sbin install
+mkdir -pv             $PKG_DEST/usr/share/doc/iproute2-6.4.0
+cp -v COPYING README* $PKG_DEST/usr/share/doc/iproute2-6.4.0
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/863-kbd diff/jhalfs/lfs-commands/chapter08/863-kbd
--- org/jhalfs/lfs-commands/chapter08/863-kbd	2024-03-03 14:55:51.524063872 +0000
+++ diff/jhalfs/lfs-commands/chapter08/863-kbd	2024-03-03 15:01:42.516927333 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/863-kbd
 
 PACKAGE=kbd-2.6.1.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -40,8 +42,37 @@
 ./configure --prefix=/usr --disable-vlock
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-cp -R -v docs/doc -T /usr/share/doc/kbd-2.6.1
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+cp -R -v docs/doc -T $PKG_DEST/usr/share/doc/kbd-2.6.1
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/864-libpipeline diff/jhalfs/lfs-commands/chapter08/864-libpipeline
--- org/jhalfs/lfs-commands/chapter08/864-libpipeline	2024-03-03 14:55:51.524063872 +0000
+++ diff/jhalfs/lfs-commands/chapter08/864-libpipeline	2024-03-03 15:01:42.516927333 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/864-libpipeline
 
 PACKAGE=libpipeline-1.5.7.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/865-make diff/jhalfs/lfs-commands/chapter08/865-make
--- org/jhalfs/lfs-commands/chapter08/865-make	2024-03-03 14:55:51.524063872 +0000
+++ diff/jhalfs/lfs-commands/chapter08/865-make	2024-03-03 15:01:42.516927333 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/865-make
 
 PACKAGE=make-4.4.1.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -38,7 +40,36 @@
 make
 # chown -Rv tester . >> $TEST_LOG 2>&1 || true
 # su tester -c "PATH=$PATH make -k check" >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/866-patch diff/jhalfs/lfs-commands/chapter08/866-patch
--- org/jhalfs/lfs-commands/chapter08/866-patch	2024-03-03 14:55:51.525063873 +0000
+++ diff/jhalfs/lfs-commands/chapter08/866-patch	2024-03-03 15:01:42.517927337 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/866-patch
 
 PACKAGE=patch-2.7.6.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,7 +39,36 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/867-tar diff/jhalfs/lfs-commands/chapter08/867-tar
--- org/jhalfs/lfs-commands/chapter08/867-tar	2024-03-03 14:55:51.525063873 +0000
+++ diff/jhalfs/lfs-commands/chapter08/867-tar	2024-03-03 15:01:42.517927337 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/867-tar
 
 PACKAGE=tar-1.35.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -38,8 +40,37 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-make -C doc install-html docdir=/usr/share/doc/tar-1.35
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+make -j1 DESTDIR=$PKG_DEST -C doc install-html docdir=/usr/share/doc/tar-1.35
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/868-texinfo diff/jhalfs/lfs-commands/chapter08/868-texinfo
--- org/jhalfs/lfs-commands/chapter08/868-texinfo	2024-03-03 14:55:51.525063873 +0000
+++ diff/jhalfs/lfs-commands/chapter08/868-texinfo	2024-03-03 15:01:42.517927337 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/868-texinfo
 
 PACKAGE=texinfo-7.0.3.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -37,8 +39,37 @@
 ./configure --prefix=/usr
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-make -j1 TEXMF=/usr/share/texmf install-tex
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+make -j1 DESTDIR=$PKG_DEST TEXMF=/usr/share/texmf install-tex
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/869-vim diff/jhalfs/lfs-commands/chapter08/869-vim
--- org/jhalfs/lfs-commands/chapter08/869-vim	2024-03-03 14:55:51.526063875 +0000
+++ diff/jhalfs/lfs-commands/chapter08/869-vim	2024-03-03 15:32:40.973656079 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/869-vim
 
 PACKAGE=vim-9.0.1677.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,12 +41,44 @@
 make
 # chown -Rv tester . >> $TEST_LOG 2>&1 || true
 # su tester -c "LANG=en_US.UTF-8 make -k -j1 test" &> vim-test.log >> $TEST_LOG 2>&1 || true
-make -j1 install
-ln -sv vim /usr/bin/vi
-for L in  /usr/share/man/{,*/}man1/vim.1; do
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+ln -sv vim $PKG_DEST/usr/bin/vi
+for L in  $PKG_DEST/usr/share/man/{,*/}man1/vim.1; do
     ln -sv vim.1 $(dirname $L)/vi.1
 done
-ln -sv ../vim/vim90/doc /usr/share/doc/vim-9.0.1677
+ln -sv ../vim/vim90/doc $PKG_DEST/usr/share/doc/vim-9.0.1677
+
+cp -a /etc/vimrc $PKG_DEST/etc
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 cat > /etc/vimrc << "EOF"
 " Begin /etc/vimrc
 
diff -Nuar org/jhalfs/lfs-commands/chapter08/870-markupsafe diff/jhalfs/lfs-commands/chapter08/870-markupsafe
--- org/jhalfs/lfs-commands/chapter08/870-markupsafe	2024-03-03 14:55:51.526063875 +0000
+++ diff/jhalfs/lfs-commands/chapter08/870-markupsafe	2024-03-03 15:32:40.974656082 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/870-markupsafe
 
 PACKAGE=MarkupSafe-2.1.3.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -35,7 +37,41 @@
 
 # Start of LFS book script
 pip3 wheel -w dist --no-build-isolation --no-deps $PWD
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
 pip3 install --no-index --no-user --find-links dist Markupsafe
+
+mkdir -pv $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/markupsafe $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/MarkupSafe-2.1.3.dist-info $PKG_DEST/usr/lib/python3.11/site-packages/
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/871-jinja2 diff/jhalfs/lfs-commands/chapter08/871-jinja2
--- org/jhalfs/lfs-commands/chapter08/871-jinja2	2024-03-03 14:55:51.526063875 +0000
+++ diff/jhalfs/lfs-commands/chapter08/871-jinja2	2024-03-03 15:32:40.976656089 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/871-jinja2
 
 PACKAGE=Jinja2-3.1.2.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -34,8 +36,42 @@
 SECONDS=${PREV_SEC}
 
 # Start of LFS book script
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
 pip3 wheel -w dist --no-build-isolation --no-deps $PWD
 pip3 install --no-index --no-user --find-links dist Jinja2
+
+mkdir -pv $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/jinja2 $PKG_DEST/usr/lib/python3.11/site-packages/
+cp -a /usr/lib/python3.11/site-packages/Jinja2-3.1.2.dist-info $PKG_DEST/usr/lib/python3.11/site-packages/
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/872-systemd diff/jhalfs/lfs-commands/chapter08/872-systemd
--- org/jhalfs/lfs-commands/chapter08/872-systemd	2024-03-03 14:55:51.527063876 +0000
+++ diff/jhalfs/lfs-commands/chapter08/872-systemd	2024-03-03 15:01:42.519927343 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/872-systemd
 
 PACKAGE=systemd-254.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -57,10 +59,39 @@
       -Ddocdir=/usr/share/doc/systemd-254 \
       ..
 ninja
-ninja install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+DESTDIR=$PKG_DEST ninja install
 tar -xf ../../systemd-man-pages-254.tar.xz \
     --no-same-owner --strip-components=1   \
-    -C /usr/share/man
+    -C $PKG_DEST/usr/share/man
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 systemd-machine-id-setup
 systemctl preset-all
 systemctl disable systemd-sysupdate{,-reboot}
diff -Nuar org/jhalfs/lfs-commands/chapter08/873-dbus diff/jhalfs/lfs-commands/chapter08/873-dbus
--- org/jhalfs/lfs-commands/chapter08/873-dbus	2024-03-03 14:55:51.527063876 +0000
+++ diff/jhalfs/lfs-commands/chapter08/873-dbus	2024-03-03 15:01:42.519927343 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/873-dbus
 
 PACKAGE=dbus-1.14.8.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -46,8 +48,37 @@
             --with-system-socket=/run/dbus/system_bus_socket
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-ln -sfv /etc/machine-id /var/lib/dbus
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+ln -sfv $PKG_DEST/etc/machine-id $PKG_DEST/var/lib/dbus
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/874-man-db diff/jhalfs/lfs-commands/chapter08/874-man-db
--- org/jhalfs/lfs-commands/chapter08/874-man-db	2024-03-03 14:55:51.527063876 +0000
+++ diff/jhalfs/lfs-commands/chapter08/874-man-db	2024-03-03 15:01:42.520927346 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/874-man-db
 
 PACKAGE=man-db-2.11.2.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -44,7 +46,36 @@
             --with-grap=/usr/bin/grap
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/875-procps-ng diff/jhalfs/lfs-commands/chapter08/875-procps-ng
--- org/jhalfs/lfs-commands/chapter08/875-procps-ng	2024-03-03 14:55:51.528063878 +0000
+++ diff/jhalfs/lfs-commands/chapter08/875-procps-ng	2024-03-03 15:01:42.520927346 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/875-procps-ng
 
 PACKAGE=procps-ng-4.0.3.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -41,7 +43,36 @@
             --with-systemd
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/876-util-linux diff/jhalfs/lfs-commands/chapter08/876-util-linux
--- org/jhalfs/lfs-commands/chapter08/876-util-linux	2024-03-03 14:55:51.528063878 +0000
+++ diff/jhalfs/lfs-commands/chapter08/876-util-linux	2024-03-03 15:32:40.977656092 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/876-util-linux
 
 PACKAGE=util-linux-2.39.1.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -53,7 +55,40 @@
 make
 # chown -Rv tester . >> $TEST_LOG 2>&1 || true
 # su tester -c "make -k check" >> $TEST_LOG 2>&1 || true
-make -j1 install
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+
+mkdir -pv $PKG_DEST/var/lib
+cp -a /var/lib/hwclock $PKG_DEST/var/lib
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter08/877-e2fsprogs diff/jhalfs/lfs-commands/chapter08/877-e2fsprogs
--- org/jhalfs/lfs-commands/chapter08/877-e2fsprogs	2024-03-03 14:55:51.529063879 +0000
+++ diff/jhalfs/lfs-commands/chapter08/877-e2fsprogs	2024-03-03 15:01:42.521927350 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/877-e2fsprogs
 
 PACKAGE=e2fsprogs-1.47.0.tar.gz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -45,13 +47,42 @@
              --disable-fsck
 make
 # make -k check >> $TEST_LOG 2>&1 || true
-make -j1 install
-rm -fv /usr/lib/{libcom_err,libe2p,libext2fs,libss}.a
-gunzip -v /usr/share/info/libext2fs.info.gz
-install-info --dir-file=/usr/share/info/dir /usr/share/info/libext2fs.info
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 DESTDIR=$PKG_DEST install
+rm -fv $PKG_DEST/usr/lib/{libcom_err,libe2p,libext2fs,libss}.a
+gunzip -v $PKG_DEST/usr/share/info/libext2fs.info.gz
+install-info --dir-file=/usr/share/info/dir $PKG_DEST/usr/share/info/libext2fs.info
 makeinfo -o      doc/com_err.info ../lib/et/com_err.texinfo
-install -v -m644 doc/com_err.info /usr/share/info
-install-info --dir-file=/usr/share/info/dir /usr/share/info/com_err.info
+install -v -m644 doc/com_err.info $PKG_DEST/usr/share/info
+install-info --dir-file=/usr/share/info/dir $PKG_DEST/usr/share/info/com_err.info
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 echo -e "\n\nTotalseconds: $SECONDS\n"
 
 # End of LFS book script
diff -Nuar org/jhalfs/lfs-commands/chapter10/1002-kernel diff/jhalfs/lfs-commands/chapter10/1002-kernel
--- org/jhalfs/lfs-commands/chapter10/1002-kernel	2024-03-03 14:55:51.554063917 +0000
+++ diff/jhalfs/lfs-commands/chapter10/1002-kernel	2024-03-03 15:33:03.923734109 +0000
@@ -16,6 +16,8 @@
 PKG_DEST=${SRC_DIR}/1002-kernel
 
 PACKAGE=linux-6.4.12.tar.xz
+source ${ROOT}${SCRIPT_ROOT}/packInstall.sh
+export -f packInstall
 cd $SRC_DIR
 PKGDIR=$(tar -tf $PACKAGE | head -n1 | sed 's@^./@@;s@/.*@@')
 export PKGDIR VERSION PKG_DEST
@@ -39,11 +41,44 @@
 timeout 60 make oldconfig ||\
 { echo kernel config is not up to date; exit 124; }
 make
-make -j1 modules_install
-cp -v arch/x86/boot/bzImage /boot/vmlinuz-6.4.12-lfs-12.0-systemd
-cp -v System.map /boot/System.map-6.4.12
-cp -v .config /boot/config-6.4.12
-cp -r Documentation -T /usr/share/doc/linux-6.4.12
+mkdir -pv $PKG_DEST/{boot,etc}
+mkdir -pv $PKG_DEST/usr/{bin,include,lib/pkgconfig,sbin}
+mkdir -pv $PKG_DEST/usr/share/{doc,info,bash-completion/completions}
+mkdir -pv $PKG_DEST/usr/share/man/man{1..8}
+case $(uname -m) in
+ x86_64) mkdir -v $PKG_DEST/lib64 ;;
+esac
+ln -sv usr/sbin $PKG_DEST
+ln -sv usr/bin  $PKG_DEST
+ln -sv usr/lib  $PKG_DEST
+make -j1 INSTALL_MOD_PATH=$PKG_DEST modules_install
+
+cp -v arch/x86/boot/bzImage $PKG_DEST/boot/vmlinuz-6.4.12-lfs-12.0-systemd
+cp -v System.map $PKG_DEST/boot/System.map-6.4.12
+cp -v .config $PKG_DEST/boot/config-6.4.12
+cp -r Documentation -T $PKG_DEST/usr/share/doc/linux-6.4.12
+
+cp -a /etc/modprobe.d $PKG_DEST/etc
+
+for dir in $PKG_DEST/usr/share/man/man{1..8} \
+           $PKG_DEST/usr/share/bash-completion{/completions,} \
+           $PKG_DEST/usr/share/{doc,info,man,} \
+           $PKG_DEST/usr/lib/pkgconfig \
+           $PKG_DEST/usr/{lib,bin,sbin,include} \
+           $PKG_DEST/{boot,etc}; do
+  [ -d "$dir" ] && [ -z "$(ls $dir)" ] && rmdir -v $dir
+done
+[ -d $PKG_DEST/lib64 ] && [ -z "$(ls $PKG_DEST/lib64)" ] &&
+  rmdir -v $PKG_DEST/lib64
+rm -v $PKG_DEST/{lib,bin,sbin}
+
+rm -rf $PKG_DEST/var/{run,lock}
+
+[ -d $PKG_DEST/var ] && [ -z "$(ls $PKG_DEST/var)" ] && rmdir -v $PKG_DEST/var
+PREV_SEC=${SECONDS}
+packInstall
+SECONDS=${PREV_SEC}
+rm -rf $PKG_DEST
 install -v -m755 -d /etc/modprobe.d
 cat > /etc/modprobe.d/usb.conf << "EOF"
 # Begin /etc/modprobe.d/usb.conf
diff -Nuar org/jhalfs/packageManager.xml diff/jhalfs/packageManager.xml
--- org/jhalfs/packageManager.xml	1970-01-01 00:00:00.000000000 +0000
+++ diff/jhalfs/packageManager.xml	2024-03-03 15:01:13.304834862 +0000
@@ -0,0 +1 @@
+#
